function cov_25e2t3nkhg(){var path="/Users/federicolacabaratz/bootcamp/collab/skylab-bootcamp-202001/staff/federico-lacabaratz/share-my-spot/share-my-spot-api/logic/retrieve-user.js";var hash="7b3d79d33517e55836a912b70da8a6da6f858480";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/federicolacabaratz/bootcamp/collab/skylab-bootcamp-202001/staff/federico-lacabaratz/share-my-spot/share-my-spot-api/logic/retrieve-user.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:51}},"1":{start:{line:2,column:29},end:{line:2,column:58}},"2":{start:{line:3,column:28},end:{line:3,column:59}},"3":{start:{line:5,column:0},end:{line:23,column:1}},"4":{start:{line:6,column:4},end:{line:6,column:29}},"5":{start:{line:8,column:4},end:{line:22,column:93}},"6":{start:{line:10,column:12},end:{line:10,column:83}},"7":{start:{line:10,column:23},end:{line:10,column:83}},"8":{start:{line:12,column:12},end:{line:12,column:96}},"9":{start:{line:12,column:34},end:{line:12,column:96}},"10":{start:{line:14,column:12},end:{line:14,column:39}},"11":{start:{line:16,column:12},end:{line:16,column:41}},"12":{start:{line:17,column:12},end:{line:17,column:27}},"13":{start:{line:18,column:12},end:{line:18,column:27}},"14":{start:{line:20,column:12},end:{line:20,column:30}},"15":{start:{line:22,column:56},end:{line:22,column:91}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:17},end:{line:5,column:18}},loc:{start:{line:5,column:23},end:{line:23,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:22},end:{line:21,column:9}},line:9},"2":{name:"(anonymous_2)",decl:{start:{line:22,column:14},end:{line:22,column:15}},loc:{start:{line:22,column:56},end:{line:22,column:91}},line:22}},branchMap:{"0":{loc:{start:{line:10,column:12},end:{line:10,column:83}},type:"if",locations:[{start:{line:10,column:12},end:{line:10,column:83}},{start:{line:10,column:12},end:{line:10,column:83}}],line:10},"1":{loc:{start:{line:12,column:12},end:{line:12,column:96}},type:"if",locations:[{start:{line:12,column:12},end:{line:12,column:96}},{start:{line:12,column:12},end:{line:12,column:96}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7b3d79d33517e55836a912b70da8a6da6f858480"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_25e2t3nkhg=function(){return actualCoverage;};return actualCoverage;}cov_25e2t3nkhg();const{validate}=(cov_25e2t3nkhg().s[0]++,require('share-my-spot-utils'));const{models:{User}}=(cov_25e2t3nkhg().s[1]++,require('share-my-spot-data'));const{NotAllowedError}=(cov_25e2t3nkhg().s[2]++,require('share-my-spot-errors'));cov_25e2t3nkhg().s[3]++;module.exports=id=>{cov_25e2t3nkhg().f[0]++;cov_25e2t3nkhg().s[4]++;validate.string(id,'id');cov_25e2t3nkhg().s[5]++;return User.findById(id).then(user=>{cov_25e2t3nkhg().f[1]++;cov_25e2t3nkhg().s[6]++;if(!user){cov_25e2t3nkhg().b[0][0]++;cov_25e2t3nkhg().s[7]++;throw new NotFoundError(`user with id ${id} does not exist`);}else{cov_25e2t3nkhg().b[0][1]++;}cov_25e2t3nkhg().s[8]++;if(user.deactivated){cov_25e2t3nkhg().b[1][0]++;cov_25e2t3nkhg().s[9]++;throw new NotAllowedError(`user with id ${id} is deactivated`);}else{cov_25e2t3nkhg().b[1][1]++;}cov_25e2t3nkhg().s[10]++;user.retrieved=new Date();cov_25e2t3nkhg().s[11]++;user.id=user._id.toString();cov_25e2t3nkhg().s[12]++;delete user._id;cov_25e2t3nkhg().s[13]++;delete user.__v;cov_25e2t3nkhg().s[14]++;return user.save();}).then(({id,name,surname,email,phone})=>{cov_25e2t3nkhg().f[2]++;cov_25e2t3nkhg().s[15]++;return{id,name,surname,email,phone};});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXIuanMiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJyZXF1aXJlIiwibW9kZWxzIiwiVXNlciIsIk5vdEFsbG93ZWRFcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiLCJpZCIsInN0cmluZyIsImZpbmRCeUlkIiwidGhlbiIsInVzZXIiLCJOb3RGb3VuZEVycm9yIiwiZGVhY3RpdmF0ZWQiLCJyZXRyaWV2ZWQiLCJEYXRlIiwiX2lkIiwidG9TdHJpbmciLCJfX3YiLCJzYXZlIiwibmFtZSIsInN1cm5hbWUiLCJlbWFpbCIsInBob25lIl0sIm1hcHBpbmdzIjoibXFGQUFBLEtBQU0sQ0FBRUEsUUFBRiwyQkFBZUMsT0FBTyxDQUFDLHFCQUFELENBQXRCLENBQU4sQ0FDQSxLQUFNLENBQUVDLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQVYsMkJBQXVCRixPQUFPLENBQUMsb0JBQUQsQ0FBOUIsQ0FBTixDQUNBLEtBQU0sQ0FBRUcsZUFBRiwyQkFBc0JILE9BQU8sQ0FBQyxzQkFBRCxDQUE3QixDQUFOLEMsd0JBRUFJLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQkMsRUFBRSxFQUFJLGlEQUNuQlAsUUFBUSxDQUFDUSxNQUFULENBQWdCRCxFQUFoQixDQUFvQixJQUFwQixFQURtQix3QkFHbkIsTUFBT0osQ0FBQUEsSUFBSSxDQUFDTSxRQUFMLENBQWNGLEVBQWQsRUFDRkcsSUFERSxDQUNHQyxJQUFJLEVBQUksaURBQ1YsR0FBSSxDQUFDQSxJQUFMLENBQVcseURBQU0sSUFBSUMsQ0FBQUEsYUFBSixDQUFtQixnQkFBZUwsRUFBRyxpQkFBckMsQ0FBTixDQUE0RCxDQUF2RSxpQ0FEVSx3QkFHVixHQUFJSSxJQUFJLENBQUNFLFdBQVQsQ0FBc0IseURBQU0sSUFBSVQsQ0FBQUEsZUFBSixDQUFxQixnQkFBZUcsRUFBRyxpQkFBdkMsQ0FBTixDQUE4RCxDQUFwRixpQ0FIVSx5QkFLVkksSUFBSSxDQUFDRyxTQUFMLENBQWlCLEdBQUlDLENBQUFBLElBQUosRUFBakIsQ0FMVSx5QkFPVkosSUFBSSxDQUFDSixFQUFMLENBQVVJLElBQUksQ0FBQ0ssR0FBTCxDQUFTQyxRQUFULEVBQVYsQ0FQVSx5QkFRVixNQUFPTixDQUFBQSxJQUFJLENBQUNLLEdBQVosQ0FSVSx5QkFTVixNQUFPTCxDQUFBQSxJQUFJLENBQUNPLEdBQVosQ0FUVSx5QkFXVixNQUFPUCxDQUFBQSxJQUFJLENBQUNRLElBQUwsRUFBUCxDQUNILENBYkUsRUFjRlQsSUFkRSxDQWNHLENBQUMsQ0FBRUgsRUFBRixDQUFNYSxJQUFOLENBQVlDLE9BQVosQ0FBcUJDLEtBQXJCLENBQTRCQyxLQUE1QixDQUFELEdBQTBDLHlEQUFFaEIsRUFBRixDQUFNYSxJQUFOLENBQVlDLE9BQVosQ0FBcUJDLEtBQXJCLENBQTRCQyxLQUE1QixFQUFtQyxDQWRoRixDQUFQLENBZUgsQ0FsQkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHZhbGlkYXRlIH0gPSByZXF1aXJlKCdzaGFyZS1teS1zcG90LXV0aWxzJylcbmNvbnN0IHsgbW9kZWxzOiB7IFVzZXIgfSB9ID0gcmVxdWlyZSgnc2hhcmUtbXktc3BvdC1kYXRhJylcbmNvbnN0IHsgTm90QWxsb3dlZEVycm9yIH0gPSByZXF1aXJlKCdzaGFyZS1teS1zcG90LWVycm9ycycpXG5cbm1vZHVsZS5leHBvcnRzID0gaWQgPT4ge1xuICAgIHZhbGlkYXRlLnN0cmluZyhpZCwgJ2lkJylcblxuICAgIHJldHVybiBVc2VyLmZpbmRCeUlkKGlkKVxuICAgICAgICAudGhlbih1c2VyID0+IHtcbiAgICAgICAgICAgIGlmICghdXNlcikgdGhyb3cgbmV3IE5vdEZvdW5kRXJyb3IoYHVzZXIgd2l0aCBpZCAke2lkfSBkb2VzIG5vdCBleGlzdGApXG5cbiAgICAgICAgICAgIGlmICh1c2VyLmRlYWN0aXZhdGVkKSB0aHJvdyBuZXcgTm90QWxsb3dlZEVycm9yKGB1c2VyIHdpdGggaWQgJHtpZH0gaXMgZGVhY3RpdmF0ZWRgKVxuXG4gICAgICAgICAgICB1c2VyLnJldHJpZXZlZCA9IG5ldyBEYXRlKClcblxuICAgICAgICAgICAgdXNlci5pZCA9IHVzZXIuX2lkLnRvU3RyaW5nKClcbiAgICAgICAgICAgIGRlbGV0ZSB1c2VyLl9pZFxuICAgICAgICAgICAgZGVsZXRlIHVzZXIuX192XG5cbiAgICAgICAgICAgIHJldHVybiB1c2VyLnNhdmUoKVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoeyBpZCwgbmFtZSwgc3VybmFtZSwgZW1haWwsIHBob25lIH0pID0+ICh7IGlkLCBuYW1lLCBzdXJuYW1lLCBlbWFpbCwgcGhvbmUgfSkpXG59Il19