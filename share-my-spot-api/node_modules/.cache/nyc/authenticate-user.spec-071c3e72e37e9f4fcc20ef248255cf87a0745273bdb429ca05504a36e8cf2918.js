function cov_17xuwf6tqd(){var path="/Users/federicolacabaratz/bootcamp/collab/skylab-bootcamp-202001/staff/federico-lacabaratz/share-my-spot/share-my-spot-api/logic/authenticate-user.spec.js";var hash="8b9f0b0dcc4586f10f2e8e1886f26a0829987f0f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/federicolacabaratz/bootcamp/collab/skylab-bootcamp-202001/staff/federico-lacabaratz/share-my-spot/share-my-spot-api/logic/authenticate-user.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:38},end:{line:3,column:45}},"2":{start:{line:4,column:39},end:{line:4,column:68}},"3":{start:{line:5,column:19},end:{line:5,column:34}},"4":{start:{line:6,column:19},end:{line:6,column:23}},"5":{start:{line:7,column:25},end:{line:7,column:55}},"6":{start:{line:8,column:25},end:{line:8,column:56}},"7":{start:{line:9,column:15},end:{line:9,column:34}},"8":{start:{line:11,column:0},end:{line:150,column:2}},"9":{start:{line:13,column:4},end:{line:16,column:6}},"10":{start:{line:14,column:8},end:{line:14,column:101}},"11":{start:{line:15,column:8},end:{line:15,column:55}},"12":{start:{line:20,column:4},end:{line:26,column:6}},"13":{start:{line:21,column:8},end:{line:21,column:33}},"14":{start:{line:22,column:8},end:{line:22,column:39}},"15":{start:{line:23,column:8},end:{line:23,column:44}},"16":{start:{line:24,column:8},end:{line:24,column:41}},"17":{start:{line:25,column:8},end:{line:25,column:41}},"18":{start:{line:28,column:4},end:{line:73,column:6}},"19":{start:{line:31,column:8},end:{line:37,column:9}},"20":{start:{line:32,column:12},end:{line:36,column:44}},"21":{start:{line:34,column:20},end:{line:34,column:74}},"22":{start:{line:36,column:30},end:{line:36,column:43}},"23":{start:{line:39,column:8},end:{line:46,column:9}},"24":{start:{line:40,column:12},end:{line:45,column:18}},"25":{start:{line:42,column:20},end:{line:42,column:48}},"26":{start:{line:43,column:20},end:{line:43,column:58}},"27":{start:{line:44,column:20},end:{line:44,column:44}},"28":{start:{line:48,column:8},end:{line:59,column:10}},"29":{start:{line:49,column:12},end:{line:49,column:48}},"30":{start:{line:51,column:12},end:{line:58,column:13}},"31":{start:{line:52,column:16},end:{line:52,column:55}},"32":{start:{line:54,column:16},end:{line:54,column:66}},"33":{start:{line:56,column:16},end:{line:56,column:38}},"34":{start:{line:57,column:16},end:{line:57,column:67}},"35":{start:{line:61,column:8},end:{line:72,column:10}},"36":{start:{line:62,column:12},end:{line:62,column:45}},"37":{start:{line:64,column:12},end:{line:71,column:13}},"38":{start:{line:65,column:16},end:{line:65,column:55}},"39":{start:{line:67,column:16},end:{line:67,column:66}},"40":{start:{line:69,column:16},end:{line:69,column:38}},"41":{start:{line:70,column:16},end:{line:70,column:67}},"42":{start:{line:75,column:4},end:{line:87,column:10}},"43":{start:{line:76,column:8},end:{line:76,column:44}},"44":{start:{line:77,column:8},end:{line:77,column:41}},"45":{start:{line:79,column:12},end:{line:86,column:13}},"46":{start:{line:80,column:16},end:{line:80,column:55}},"47":{start:{line:82,column:16},end:{line:82,column:66}},"48":{start:{line:84,column:16},end:{line:84,column:38}},"49":{start:{line:85,column:16},end:{line:85,column:67}},"50":{start:{line:89,column:8},end:{line:144,column:10}},"51":{start:{line:91,column:12},end:{line:121,column:14}},"52":{start:{line:92,column:16},end:{line:92,column:25}},"53":{start:{line:93,column:16},end:{line:95,column:75}},"54":{start:{line:94,column:20},end:{line:94,column:53}},"55":{start:{line:97,column:16},end:{line:97,column:29}},"56":{start:{line:98,column:16},end:{line:100,column:75}},"57":{start:{line:99,column:20},end:{line:99,column:53}},"58":{start:{line:102,column:16},end:{line:102,column:33}},"59":{start:{line:103,column:16},end:{line:105,column:75}},"60":{start:{line:104,column:20},end:{line:104,column:53}},"61":{start:{line:107,column:16},end:{line:107,column:26}},"62":{start:{line:108,column:16},end:{line:110,column:75}},"63":{start:{line:109,column:20},end:{line:109,column:53}},"64":{start:{line:112,column:16},end:{line:112,column:36}},"65":{start:{line:113,column:16},end:{line:115,column:73}},"66":{start:{line:114,column:20},end:{line:114,column:53}},"67":{start:{line:117,column:16},end:{line:117,column:40}},"68":{start:{line:118,column:16},end:{line:120,column:73}},"69":{start:{line:119,column:20},end:{line:119,column:53}},"70":{start:{line:123,column:12},end:{line:143,column:14}},"71":{start:{line:124,column:16},end:{line:124,column:28}},"72":{start:{line:125,column:16},end:{line:127,column:81}},"73":{start:{line:126,column:20},end:{line:126,column:53}},"74":{start:{line:129,column:16},end:{line:129,column:32}},"75":{start:{line:130,column:16},end:{line:132,column:81}},"76":{start:{line:131,column:20},end:{line:131,column:53}},"77":{start:{line:134,column:16},end:{line:134,column:36}},"78":{start:{line:135,column:16},end:{line:137,column:81}},"79":{start:{line:136,column:20},end:{line:136,column:53}},"80":{start:{line:139,column:16},end:{line:139,column:29}},"81":{start:{line:140,column:16},end:{line:142,column:81}},"82":{start:{line:141,column:20},end:{line:141,column:53}},"83":{start:{line:146,column:4},end:{line:149,column:6}},"84":{start:{line:147,column:8},end:{line:147,column:48}},"85":{start:{line:148,column:8},end:{line:148,column:42}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:29},end:{line:11,column:30}},loc:{start:{line:11,column:35},end:{line:150,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:23},end:{line:16,column:5}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:20,column:15},end:{line:20,column:16}},loc:{start:{line:20,column:21},end:{line:26,column:5}},line:20},"3":{name:"(anonymous_3)",decl:{start:{line:28,column:41},end:{line:28,column:42}},loc:{start:{line:28,column:47},end:{line:73,column:5}},line:28},"4":{name:"(anonymous_4)",decl:{start:{line:31,column:19},end:{line:31,column:20}},loc:{start:{line:32,column:12},end:{line:36,column:44}},line:32},"5":{name:"(anonymous_5)",decl:{start:{line:33,column:22},end:{line:33,column:23}},loc:{start:{line:34,column:20},end:{line:34,column:74}},line:34},"6":{name:"(anonymous_6)",decl:{start:{line:36,column:22},end:{line:36,column:23}},loc:{start:{line:36,column:30},end:{line:36,column:43}},line:36},"7":{name:"(anonymous_7)",decl:{start:{line:39,column:72},end:{line:39,column:73}},loc:{start:{line:40,column:12},end:{line:45,column:18}},line:40},"8":{name:"(anonymous_8)",decl:{start:{line:41,column:22},end:{line:41,column:23}},loc:{start:{line:41,column:28},end:{line:45,column:17}},line:41},"9":{name:"(anonymous_9)",decl:{start:{line:48,column:45},end:{line:48,column:46}},loc:{start:{line:48,column:57},end:{line:59,column:9}},line:48},"10":{name:"(anonymous_10)",decl:{start:{line:61,column:48},end:{line:61,column:49}},loc:{start:{line:61,column:60},end:{line:72,column:9}},line:61},"11":{name:"(anonymous_11)",decl:{start:{line:75,column:47},end:{line:75,column:48}},loc:{start:{line:75,column:59},end:{line:87,column:9}},line:75},"12":{name:"(anonymous_12)",decl:{start:{line:89,column:34},end:{line:89,column:35}},loc:{start:{line:89,column:40},end:{line:144,column:9}},line:89},"13":{name:"(anonymous_13)",decl:{start:{line:91,column:66},end:{line:91,column:67}},loc:{start:{line:91,column:72},end:{line:121,column:13}},line:91},"14":{name:"(anonymous_14)",decl:{start:{line:93,column:23},end:{line:93,column:24}},loc:{start:{line:94,column:20},end:{line:94,column:53}},line:94},"15":{name:"(anonymous_15)",decl:{start:{line:98,column:23},end:{line:98,column:24}},loc:{start:{line:99,column:20},end:{line:99,column:53}},line:99},"16":{name:"(anonymous_16)",decl:{start:{line:103,column:23},end:{line:103,column:24}},loc:{start:{line:104,column:20},end:{line:104,column:53}},line:104},"17":{name:"(anonymous_17)",decl:{start:{line:108,column:23},end:{line:108,column:24}},loc:{start:{line:109,column:20},end:{line:109,column:53}},line:109},"18":{name:"(anonymous_18)",decl:{start:{line:113,column:23},end:{line:113,column:24}},loc:{start:{line:114,column:20},end:{line:114,column:53}},line:114},"19":{name:"(anonymous_19)",decl:{start:{line:118,column:23},end:{line:118,column:24}},loc:{start:{line:119,column:20},end:{line:119,column:53}},line:119},"20":{name:"(anonymous_20)",decl:{start:{line:123,column:55},end:{line:123,column:56}},loc:{start:{line:123,column:61},end:{line:143,column:13}},line:123},"21":{name:"(anonymous_21)",decl:{start:{line:125,column:23},end:{line:125,column:24}},loc:{start:{line:126,column:20},end:{line:126,column:53}},line:126},"22":{name:"(anonymous_22)",decl:{start:{line:130,column:23},end:{line:130,column:24}},loc:{start:{line:131,column:20},end:{line:131,column:53}},line:131},"23":{name:"(anonymous_23)",decl:{start:{line:135,column:23},end:{line:135,column:24}},loc:{start:{line:136,column:20},end:{line:136,column:53}},line:136},"24":{name:"(anonymous_24)",decl:{start:{line:140,column:23},end:{line:140,column:24}},loc:{start:{line:141,column:20},end:{line:141,column:53}},line:141},"25":{name:"(anonymous_25)",decl:{start:{line:146,column:10},end:{line:146,column:11}},loc:{start:{line:146,column:22},end:{line:149,column:5}},line:146}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b9f0b0dcc4586f10f2e8e1886f26a0829987f0f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_17xuwf6tqd=function(){return actualCoverage;};return actualCoverage;}cov_17xuwf6tqd();cov_17xuwf6tqd().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL}}=(cov_17xuwf6tqd().s[1]++,process);const{mongoose,models:{User}}=(cov_17xuwf6tqd().s[2]++,require('share-my-spot-data'));const{expect}=(cov_17xuwf6tqd().s[3]++,require('chai'));const{random}=(cov_17xuwf6tqd().s[4]++,Math);const authenticateUser=(cov_17xuwf6tqd().s[5]++,require('./authenticate-user'));const{ContentError}=(cov_17xuwf6tqd().s[6]++,require('share-my-spot-errors'));const bcrypt=(cov_17xuwf6tqd().s[7]++,require('bcryptjs'));cov_17xuwf6tqd().s[8]++;describe('authenticateUser',()=>{cov_17xuwf6tqd().f[0]++;cov_17xuwf6tqd().s[9]++;before(async()=>{cov_17xuwf6tqd().f[1]++;cov_17xuwf6tqd().s[10]++;await mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true});cov_17xuwf6tqd().s[11]++;return await Promise.resolve(User.deleteMany());});let name,surname,email,phone,password;cov_17xuwf6tqd().s[12]++;beforeEach(()=>{cov_17xuwf6tqd().f[2]++;cov_17xuwf6tqd().s[13]++;name=`name-${random()}`;cov_17xuwf6tqd().s[14]++;surname=`surname-${random()}`;cov_17xuwf6tqd().s[15]++;email=`email-${random()}@mail.com`;cov_17xuwf6tqd().s[16]++;phone=666555444+`${random()}`;cov_17xuwf6tqd().s[17]++;password=`password-${random()}`;});cov_17xuwf6tqd().s[18]++;describe('when user already exists',()=>{cov_17xuwf6tqd().f[3]++;let _id;cov_17xuwf6tqd().s[19]++;beforeEach(()=>{cov_17xuwf6tqd().f[4]++;cov_17xuwf6tqd().s[20]++;return bcrypt.hash(password,10).then(password=>{cov_17xuwf6tqd().f[5]++;cov_17xuwf6tqd().s[21]++;return User.create({name,surname,email,phone,password});}).then(user=>{cov_17xuwf6tqd().f[6]++;cov_17xuwf6tqd().s[22]++;return _id=user.id;});});cov_17xuwf6tqd().s[23]++;it('should succeed on correct and valid and right credentials',()=>{cov_17xuwf6tqd().f[7]++;cov_17xuwf6tqd().s[24]++;return authenticateUser(email,password).then(id=>{cov_17xuwf6tqd().f[8]++;cov_17xuwf6tqd().s[25]++;expect(id).to.be.a('string');cov_17xuwf6tqd().s[26]++;expect(id.length).to.be.greaterThan(0);cov_17xuwf6tqd().s[27]++;expect(id).to.equal(_id);});});cov_17xuwf6tqd().s[28]++;it('should fail on incorrect email',async()=>{cov_17xuwf6tqd().f[9]++;cov_17xuwf6tqd().s[29]++;email=`email-${random()}@mail.com`;cov_17xuwf6tqd().s[30]++;try{cov_17xuwf6tqd().s[31]++;await authenticateUser(email,password);cov_17xuwf6tqd().s[32]++;throw new Error('you should not reach this point');}catch(error){cov_17xuwf6tqd().s[33]++;expect(error).to.exist;cov_17xuwf6tqd().s[34]++;expect(error.message).to.equal(`wrong credentials`);}});cov_17xuwf6tqd().s[35]++;it('should fail on incorrect password',async()=>{cov_17xuwf6tqd().f[10]++;cov_17xuwf6tqd().s[36]++;password=`password-${random()}`;cov_17xuwf6tqd().s[37]++;try{cov_17xuwf6tqd().s[38]++;await authenticateUser(email,password);cov_17xuwf6tqd().s[39]++;throw new Error('you should not reach this point');}catch(error){cov_17xuwf6tqd().s[40]++;expect(error).to.exist;cov_17xuwf6tqd().s[41]++;expect(error.message).to.equal(`wrong credentials`);}});});cov_17xuwf6tqd().s[42]++;it('should fail when user does not exist',async()=>{cov_17xuwf6tqd().f[11]++;cov_17xuwf6tqd().s[43]++;email=`email-${random()}@mail.com`;cov_17xuwf6tqd().s[44]++;password=`password-${random()}`;cov_17xuwf6tqd().s[45]++;try{cov_17xuwf6tqd().s[46]++;await authenticateUser(email,password);cov_17xuwf6tqd().s[47]++;throw new Error('you should not reach this point');}catch(error){cov_17xuwf6tqd().s[48]++;expect(error).to.exist;cov_17xuwf6tqd().s[49]++;expect(error.message).to.equal(`wrong credentials`);}});cov_17xuwf6tqd().s[50]++;describe('unhappy paths',()=>{cov_17xuwf6tqd().f[12]++;cov_17xuwf6tqd().s[51]++;it('should fail on a non-string and non-valid email',()=>{cov_17xuwf6tqd().f[13]++;cov_17xuwf6tqd().s[52]++;email=1;cov_17xuwf6tqd().s[53]++;expect(()=>{cov_17xuwf6tqd().f[14]++;cov_17xuwf6tqd().s[54]++;return authenticateUser(email,password);}).to.throw(TypeError,`email ${email} is not a string`);cov_17xuwf6tqd().s[55]++;email=false;cov_17xuwf6tqd().s[56]++;expect(()=>{cov_17xuwf6tqd().f[15]++;cov_17xuwf6tqd().s[57]++;return authenticateUser(email,password);}).to.throw(TypeError,`email ${email} is not a string`);cov_17xuwf6tqd().s[58]++;email=undefined;cov_17xuwf6tqd().s[59]++;expect(()=>{cov_17xuwf6tqd().f[16]++;cov_17xuwf6tqd().s[60]++;return authenticateUser(email,password);}).to.throw(TypeError,`email ${email} is not a string`);cov_17xuwf6tqd().s[61]++;email=[];cov_17xuwf6tqd().s[62]++;expect(()=>{cov_17xuwf6tqd().f[17]++;cov_17xuwf6tqd().s[63]++;return authenticateUser(email,password);}).to.throw(TypeError,`email ${email} is not a string`);cov_17xuwf6tqd().s[64]++;email='kfjsnfksdn';cov_17xuwf6tqd().s[65]++;expect(()=>{cov_17xuwf6tqd().f[18]++;cov_17xuwf6tqd().s[66]++;return authenticateUser(email,password);}).to.throw(ContentError,`${email} is not an e-mail`);cov_17xuwf6tqd().s[67]++;email='kfjsnfksdn@123';cov_17xuwf6tqd().s[68]++;expect(()=>{cov_17xuwf6tqd().f[19]++;cov_17xuwf6tqd().s[69]++;return authenticateUser(email,password);}).to.throw(ContentError,`${email} is not an e-mail`);});cov_17xuwf6tqd().s[70]++;it('should fail on a non-string password',()=>{cov_17xuwf6tqd().f[20]++;cov_17xuwf6tqd().s[71]++;password=1;cov_17xuwf6tqd().s[72]++;expect(()=>{cov_17xuwf6tqd().f[21]++;cov_17xuwf6tqd().s[73]++;return authenticateUser(email,password);}).to.throw(TypeError,`password ${password} is not a string`);cov_17xuwf6tqd().s[74]++;password=false;cov_17xuwf6tqd().s[75]++;expect(()=>{cov_17xuwf6tqd().f[22]++;cov_17xuwf6tqd().s[76]++;return authenticateUser(email,password);}).to.throw(TypeError,`password ${password} is not a string`);cov_17xuwf6tqd().s[77]++;password=undefined;cov_17xuwf6tqd().s[78]++;expect(()=>{cov_17xuwf6tqd().f[23]++;cov_17xuwf6tqd().s[79]++;return authenticateUser(email,password);}).to.throw(TypeError,`password ${password} is not a string`);cov_17xuwf6tqd().s[80]++;password=[];cov_17xuwf6tqd().s[81]++;expect(()=>{cov_17xuwf6tqd().f[24]++;cov_17xuwf6tqd().s[82]++;return authenticateUser(email,password);}).to.throw(TypeError,`password ${password} is not a string`);});});cov_17xuwf6tqd().s[83]++;after(async()=>{cov_17xuwf6tqd().f[25]++;cov_17xuwf6tqd().s[84]++;await Promise.resolve(User.deleteMany());cov_17xuwf6tqd().s[85]++;return await mongoose.disconnect();});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0ZS11c2VyLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwibW9uZ29vc2UiLCJtb2RlbHMiLCJVc2VyIiwiZXhwZWN0IiwicmFuZG9tIiwiTWF0aCIsImF1dGhlbnRpY2F0ZVVzZXIiLCJDb250ZW50RXJyb3IiLCJiY3J5cHQiLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJQcm9taXNlIiwicmVzb2x2ZSIsImRlbGV0ZU1hbnkiLCJuYW1lIiwic3VybmFtZSIsImVtYWlsIiwicGhvbmUiLCJwYXNzd29yZCIsImJlZm9yZUVhY2giLCJfaWQiLCJoYXNoIiwidGhlbiIsImNyZWF0ZSIsInVzZXIiLCJpZCIsIml0IiwidG8iLCJiZSIsImEiLCJsZW5ndGgiLCJncmVhdGVyVGhhbiIsImVxdWFsIiwiRXJyb3IiLCJlcnJvciIsImV4aXN0IiwibWVzc2FnZSIsInRocm93IiwiVHlwZUVycm9yIiwidW5kZWZpbmVkIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoiNHdVQUFBQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMsR0FBRyxDQUFFLENBQUVDLGdCQUFGLENBQVAsMkJBQWdDQyxPQUFoQyxDQUFOLENBQ0EsS0FBTSxDQUFFQyxRQUFGLENBQVlDLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQXBCLDJCQUFpQ1AsT0FBTyxDQUFDLG9CQUFELENBQXhDLENBQU4sQ0FDQSxLQUFNLENBQUVRLE1BQUYsMkJBQWFSLE9BQU8sQ0FBQyxNQUFELENBQXBCLENBQU4sQ0FDQSxLQUFNLENBQUVTLE1BQUYsMkJBQWFDLElBQWIsQ0FBTixDQUNBLEtBQU1DLENBQUFBLGdCQUFnQiwwQkFBR1gsT0FBTyxDQUFDLHFCQUFELENBQVYsQ0FBdEIsQ0FDQSxLQUFNLENBQUVZLFlBQUYsMkJBQW1CWixPQUFPLENBQUMsc0JBQUQsQ0FBMUIsQ0FBTixDQUNBLEtBQU1hLENBQUFBLE1BQU0sMEJBQUdiLE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBWixDLHdCQUVBYyxRQUFRLENBQUMsa0JBQUQsQ0FBcUIsSUFBTSxpREFFL0JDLE1BQU0sQ0FBQyxTQUFZLGtEQUNmLEtBQU1WLENBQUFBLFFBQVEsQ0FBQ1csT0FBVCxDQUFpQmIsZ0JBQWpCLENBQW1DLENBQUVjLGVBQWUsQ0FBRSxJQUFuQixDQUF5QkMsa0JBQWtCLENBQUUsSUFBN0MsQ0FBbkMsQ0FBTixDQURlLHlCQUVmLE1BQU8sTUFBTUMsQ0FBQUEsT0FBTyxDQUFDQyxPQUFSLENBQWdCYixJQUFJLENBQUNjLFVBQUwsRUFBaEIsQ0FBYixDQUNILENBSEssQ0FBTixDQUtBLEdBQUlDLENBQUFBLElBQUosQ0FBVUMsT0FBVixDQUFtQkMsS0FBbkIsQ0FBMEJDLEtBQTFCLENBQWlDQyxRQUFqQyxDQVArQix5QkFTL0JDLFVBQVUsQ0FBQyxJQUFNLGtEQUNiTCxJQUFJLENBQUksUUFBT2IsTUFBTSxFQUFHLEVBQXhCLENBRGEseUJBRWJjLE9BQU8sQ0FBSSxXQUFVZCxNQUFNLEVBQUcsRUFBOUIsQ0FGYSx5QkFHYmUsS0FBSyxDQUFJLFNBQVFmLE1BQU0sRUFBRyxXQUExQixDQUhhLHlCQUliZ0IsS0FBSyxDQUFHLFVBQWEsR0FBRWhCLE1BQU0sRUFBRyxFQUFoQyxDQUphLHlCQUtiaUIsUUFBUSxDQUFJLFlBQVdqQixNQUFNLEVBQUcsRUFBaEMsQ0FDSCxDQU5TLENBQVYsQ0FUK0IseUJBaUIvQkssUUFBUSxDQUFDLDBCQUFELENBQTZCLElBQU0seUJBQ3ZDLEdBQUljLENBQUFBLEdBQUosQ0FEdUMseUJBR3ZDRCxVQUFVLENBQUMsSUFDUCx3REFBQWQsQ0FBQUEsTUFBTSxDQUFDZ0IsSUFBUCxDQUFZSCxRQUFaLENBQXNCLEVBQXRCLEVBQ0tJLElBREwsQ0FDVUosUUFBUSxFQUNWLHdEQUFBbkIsQ0FBQUEsSUFBSSxDQUFDd0IsTUFBTCxDQUFZLENBQUVULElBQUYsQ0FBUUMsT0FBUixDQUFpQkMsS0FBakIsQ0FBd0JDLEtBQXhCLENBQStCQyxRQUEvQixDQUFaLEVBQXNELENBRjlELEVBSUtJLElBSkwsQ0FJVUUsSUFBSSxFQUFJLHdEQUFBSixDQUFBQSxHQUFHLENBQUdJLElBQUksQ0FBQ0MsRUFBWCxDQUFhLENBSi9CLEVBSWdDLENBTDFCLENBQVYsQ0FIdUMseUJBV3ZDQyxFQUFFLENBQUMsMkRBQUQsQ0FBOEQsSUFDNUQsd0RBQUF2QixDQUFBQSxnQkFBZ0IsQ0FBQ2EsS0FBRCxDQUFRRSxRQUFSLENBQWhCLENBQ0tJLElBREwsQ0FDVUcsRUFBRSxFQUFJLGtEQUNSekIsTUFBTSxDQUFDeUIsRUFBRCxDQUFOLENBQVdFLEVBQVgsQ0FBY0MsRUFBZCxDQUFpQkMsQ0FBakIsQ0FBbUIsUUFBbkIsRUFEUSx5QkFFUjdCLE1BQU0sQ0FBQ3lCLEVBQUUsQ0FBQ0ssTUFBSixDQUFOLENBQWtCSCxFQUFsQixDQUFxQkMsRUFBckIsQ0FBd0JHLFdBQXhCLENBQW9DLENBQXBDLEVBRlEseUJBR1IvQixNQUFNLENBQUN5QixFQUFELENBQU4sQ0FBV0UsRUFBWCxDQUFjSyxLQUFkLENBQW9CWixHQUFwQixFQUNILENBTEwsRUFLTSxDQU5SLENBQUYsQ0FYdUMseUJBb0J2Q00sRUFBRSxDQUFDLGdDQUFELENBQW1DLFNBQVksa0RBQzdDVixLQUFLLENBQUksU0FBUWYsTUFBTSxFQUFHLFdBQTFCLENBRDZDLHlCQUc3QyxHQUFJLDBCQUNBLEtBQU1FLENBQUFBLGdCQUFnQixDQUFDYSxLQUFELENBQVFFLFFBQVIsQ0FBdEIsQ0FEQSx5QkFHQSxLQUFNLElBQUllLENBQUFBLEtBQUosQ0FBVSxpQ0FBVixDQUFOLENBQ0gsQ0FBQyxNQUFPQyxLQUFQLENBQWMsMEJBQ1psQyxNQUFNLENBQUNrQyxLQUFELENBQU4sQ0FBY1AsRUFBZCxDQUFpQlEsS0FBakIsQ0FEWSx5QkFFWm5DLE1BQU0sQ0FBQ2tDLEtBQUssQ0FBQ0UsT0FBUCxDQUFOLENBQXNCVCxFQUF0QixDQUF5QkssS0FBekIsQ0FBZ0MsbUJBQWhDLEVBQ0gsQ0FDSixDQVhDLENBQUYsQ0FwQnVDLHlCQWlDdkNOLEVBQUUsQ0FBQyxtQ0FBRCxDQUFzQyxTQUFZLG1EQUNoRFIsUUFBUSxDQUFJLFlBQVdqQixNQUFNLEVBQUcsRUFBaEMsQ0FEZ0QseUJBR2hELEdBQUksMEJBQ0EsS0FBTUUsQ0FBQUEsZ0JBQWdCLENBQUNhLEtBQUQsQ0FBUUUsUUFBUixDQUF0QixDQURBLHlCQUdBLEtBQU0sSUFBSWUsQ0FBQUEsS0FBSixDQUFVLGlDQUFWLENBQU4sQ0FDSCxDQUFDLE1BQU9DLEtBQVAsQ0FBYywwQkFDWmxDLE1BQU0sQ0FBQ2tDLEtBQUQsQ0FBTixDQUFjUCxFQUFkLENBQWlCUSxLQUFqQixDQURZLHlCQUVabkMsTUFBTSxDQUFDa0MsS0FBSyxDQUFDRSxPQUFQLENBQU4sQ0FBc0JULEVBQXRCLENBQXlCSyxLQUF6QixDQUFnQyxtQkFBaEMsRUFDSCxDQUNKLENBWEMsQ0FBRixDQVlILENBN0NPLENBQVIsQ0FqQitCLHlCQWdFL0JOLEVBQUUsQ0FBQyxzQ0FBRCxDQUF5QyxTQUFZLG1EQUNuRFYsS0FBSyxDQUFJLFNBQVFmLE1BQU0sRUFBRyxXQUExQixDQURtRCx5QkFFbkRpQixRQUFRLENBQUksWUFBV2pCLE1BQU0sRUFBRyxFQUFoQyxDQUZtRCx5QkFJL0MsR0FBSSwwQkFDQSxLQUFNRSxDQUFBQSxnQkFBZ0IsQ0FBQ2EsS0FBRCxDQUFRRSxRQUFSLENBQXRCLENBREEseUJBR0EsS0FBTSxJQUFJZSxDQUFBQSxLQUFKLENBQVUsaUNBQVYsQ0FBTixDQUNILENBQUMsTUFBT0MsS0FBUCxDQUFjLDBCQUNabEMsTUFBTSxDQUFDa0MsS0FBRCxDQUFOLENBQWNQLEVBQWQsQ0FBaUJRLEtBQWpCLENBRFkseUJBRVpuQyxNQUFNLENBQUNrQyxLQUFLLENBQUNFLE9BQVAsQ0FBTixDQUFzQlQsRUFBdEIsQ0FBeUJLLEtBQXpCLENBQWdDLG1CQUFoQyxFQUNILENBQ0osQ0FaSCxDQUFGLENBaEUrQix5QkE4RTNCMUIsUUFBUSxDQUFDLGVBQUQsQ0FBa0IsSUFBTSxtREFFNUJvQixFQUFFLENBQUMsaURBQUQsQ0FBb0QsSUFBTSxtREFDeERWLEtBQUssQ0FBRyxDQUFSLENBRHdELHlCQUV4RGhCLE1BQU0sQ0FBQyxJQUNILHlEQUFBRyxDQUFBQSxnQkFBZ0IsQ0FBQ2EsS0FBRCxDQUFRRSxRQUFSLENBQWhCLENBQWlDLENBRC9CLENBQU4sQ0FFTVMsRUFGTixDQUVTVSxLQUZULENBRWVDLFNBRmYsQ0FFMkIsU0FBUXRCLEtBQU0sa0JBRnpDLEVBRndELHlCQU14REEsS0FBSyxDQUFHLEtBQVIsQ0FOd0QseUJBT3hEaEIsTUFBTSxDQUFDLElBQ0gseURBQUFHLENBQUFBLGdCQUFnQixDQUFDYSxLQUFELENBQVFFLFFBQVIsQ0FBaEIsQ0FBaUMsQ0FEL0IsQ0FBTixDQUVNUyxFQUZOLENBRVNVLEtBRlQsQ0FFZUMsU0FGZixDQUUyQixTQUFRdEIsS0FBTSxrQkFGekMsRUFQd0QseUJBV3hEQSxLQUFLLENBQUd1QixTQUFSLENBWHdELHlCQVl4RHZDLE1BQU0sQ0FBQyxJQUNILHlEQUFBRyxDQUFBQSxnQkFBZ0IsQ0FBQ2EsS0FBRCxDQUFRRSxRQUFSLENBQWhCLENBQWlDLENBRC9CLENBQU4sQ0FFTVMsRUFGTixDQUVTVSxLQUZULENBRWVDLFNBRmYsQ0FFMkIsU0FBUXRCLEtBQU0sa0JBRnpDLEVBWndELHlCQWdCeERBLEtBQUssQ0FBRyxFQUFSLENBaEJ3RCx5QkFpQnhEaEIsTUFBTSxDQUFDLElBQ0gseURBQUFHLENBQUFBLGdCQUFnQixDQUFDYSxLQUFELENBQVFFLFFBQVIsQ0FBaEIsQ0FBaUMsQ0FEL0IsQ0FBTixDQUVNUyxFQUZOLENBRVNVLEtBRlQsQ0FFZUMsU0FGZixDQUUyQixTQUFRdEIsS0FBTSxrQkFGekMsRUFqQndELHlCQXFCeERBLEtBQUssQ0FBRyxZQUFSLENBckJ3RCx5QkFzQnhEaEIsTUFBTSxDQUFDLElBQ0gseURBQUFHLENBQUFBLGdCQUFnQixDQUFDYSxLQUFELENBQVFFLFFBQVIsQ0FBaEIsQ0FBaUMsQ0FEL0IsQ0FBTixDQUVNUyxFQUZOLENBRVNVLEtBRlQsQ0FFZWpDLFlBRmYsQ0FFOEIsR0FBRVksS0FBTSxtQkFGdEMsRUF0QndELHlCQTBCeERBLEtBQUssQ0FBRyxnQkFBUixDQTFCd0QseUJBMkJ4RGhCLE1BQU0sQ0FBQyxJQUNILHlEQUFBRyxDQUFBQSxnQkFBZ0IsQ0FBQ2EsS0FBRCxDQUFRRSxRQUFSLENBQWhCLENBQWlDLENBRC9CLENBQU4sQ0FFTVMsRUFGTixDQUVTVSxLQUZULENBRWVqQyxZQUZmLENBRThCLEdBQUVZLEtBQU0sbUJBRnRDLEVBR0gsQ0E5QkMsQ0FBRixDQUY0Qix5QkFrQzVCVSxFQUFFLENBQUMsc0NBQUQsQ0FBeUMsSUFBTSxtREFDN0NSLFFBQVEsQ0FBRyxDQUFYLENBRDZDLHlCQUU3Q2xCLE1BQU0sQ0FBQyxJQUNILHlEQUFBRyxDQUFBQSxnQkFBZ0IsQ0FBQ2EsS0FBRCxDQUFRRSxRQUFSLENBQWhCLENBQWlDLENBRC9CLENBQU4sQ0FFTVMsRUFGTixDQUVTVSxLQUZULENBRWVDLFNBRmYsQ0FFMkIsWUFBV3BCLFFBQVMsa0JBRi9DLEVBRjZDLHlCQU03Q0EsUUFBUSxDQUFHLEtBQVgsQ0FONkMseUJBTzdDbEIsTUFBTSxDQUFDLElBQ0gseURBQUFHLENBQUFBLGdCQUFnQixDQUFDYSxLQUFELENBQVFFLFFBQVIsQ0FBaEIsQ0FBaUMsQ0FEL0IsQ0FBTixDQUVNUyxFQUZOLENBRVNVLEtBRlQsQ0FFZUMsU0FGZixDQUUyQixZQUFXcEIsUUFBUyxrQkFGL0MsRUFQNkMseUJBVzdDQSxRQUFRLENBQUdxQixTQUFYLENBWDZDLHlCQVk3Q3ZDLE1BQU0sQ0FBQyxJQUNILHlEQUFBRyxDQUFBQSxnQkFBZ0IsQ0FBQ2EsS0FBRCxDQUFRRSxRQUFSLENBQWhCLENBQWlDLENBRC9CLENBQU4sQ0FFTVMsRUFGTixDQUVTVSxLQUZULENBRWVDLFNBRmYsQ0FFMkIsWUFBV3BCLFFBQVMsa0JBRi9DLEVBWjZDLHlCQWdCN0NBLFFBQVEsQ0FBRyxFQUFYLENBaEI2Qyx5QkFpQjdDbEIsTUFBTSxDQUFDLElBQ0gseURBQUFHLENBQUFBLGdCQUFnQixDQUFDYSxLQUFELENBQVFFLFFBQVIsQ0FBaEIsQ0FBaUMsQ0FEL0IsQ0FBTixDQUVNUyxFQUZOLENBRVNVLEtBRlQsQ0FFZUMsU0FGZixDQUUyQixZQUFXcEIsUUFBUyxrQkFGL0MsRUFHSCxDQXBCQyxDQUFGLENBcUJILENBdkRPLENBQVIsQ0E5RTJCLHlCQXVJL0JzQixLQUFLLENBQUMsU0FBWSxtREFDZCxLQUFNN0IsQ0FBQUEsT0FBTyxDQUFDQyxPQUFSLENBQWdCYixJQUFJLENBQUNjLFVBQUwsRUFBaEIsQ0FBTixDQURjLHlCQUVkLE1BQU8sTUFBTWhCLENBQUFBLFFBQVEsQ0FBQzRDLFVBQVQsRUFBYixDQUNILENBSEksQ0FBTCxDQUlILENBM0lPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxuXG5jb25zdCB7IGVudjogeyBURVNUX01PTkdPREJfVVJMIH0gfSA9IHByb2Nlc3NcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczogeyBVc2VyIH0gfSA9IHJlcXVpcmUoJ3NoYXJlLW15LXNwb3QtZGF0YScpXG5jb25zdCB7IGV4cGVjdCB9ID0gcmVxdWlyZSgnY2hhaScpXG5jb25zdCB7IHJhbmRvbSB9ID0gTWF0aFxuY29uc3QgYXV0aGVudGljYXRlVXNlciA9IHJlcXVpcmUoJy4vYXV0aGVudGljYXRlLXVzZXInKVxuY29uc3QgeyBDb250ZW50RXJyb3IgfSA9IHJlcXVpcmUoJ3NoYXJlLW15LXNwb3QtZXJyb3JzJylcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJylcblxuZGVzY3JpYmUoJ2F1dGhlbnRpY2F0ZVVzZXInLCAoKSA9PiB7XG5cbiAgICBiZWZvcmUoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KFRFU1RfTU9OR09EQl9VUkwsIHsgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLCB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSlcbiAgICAgICAgcmV0dXJuIGF3YWl0IFByb21pc2UucmVzb2x2ZShVc2VyLmRlbGV0ZU1hbnkoKSlcbiAgICB9KVxuXG4gICAgbGV0IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwaG9uZSwgcGFzc3dvcmRcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXG4gICAgICAgIHN1cm5hbWUgPSBgc3VybmFtZS0ke3JhbmRvbSgpfWBcbiAgICAgICAgZW1haWwgPSBgZW1haWwtJHtyYW5kb20oKX1AbWFpbC5jb21gXG4gICAgICAgIHBob25lID0gNjY2NTU1NDQ0ICsgYCR7cmFuZG9tKCl9YFxuICAgICAgICBwYXNzd29yZCA9IGBwYXNzd29yZC0ke3JhbmRvbSgpfWBcbiAgICB9KVxuXG4gICAgZGVzY3JpYmUoJ3doZW4gdXNlciBhbHJlYWR5IGV4aXN0cycsICgpID0+IHtcbiAgICAgICAgbGV0IF9pZFxuXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT5cbiAgICAgICAgICAgIGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMClcbiAgICAgICAgICAgICAgICAudGhlbihwYXNzd29yZCA9PlxuICAgICAgICAgICAgICAgICAgICBVc2VyLmNyZWF0ZSh7IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwaG9uZSwgcGFzc3dvcmQgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLnRoZW4odXNlciA9PiBfaWQgPSB1c2VyLmlkKVxuICAgICAgICApXG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzdWNjZWVkIG9uIGNvcnJlY3QgYW5kIHZhbGlkIGFuZCByaWdodCBjcmVkZW50aWFscycsICgpID0+XG4gICAgICAgICAgICBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZClcbiAgICAgICAgICAgICAgICAudGhlbihpZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChpZCkudG8uYmUuYSgnc3RyaW5nJylcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGlkLmxlbmd0aCkudG8uYmUuZ3JlYXRlclRoYW4oMClcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGlkKS50by5lcXVhbChfaWQpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgKVxuXG4gICAgICAgIGl0KCdzaG91bGQgZmFpbCBvbiBpbmNvcnJlY3QgZW1haWwnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBlbWFpbCA9IGBlbWFpbC0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZClcblxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigneW91IHNob3VsZCBub3QgcmVhY2ggdGhpcyBwb2ludCcpXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uZXhpc3RcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXF1YWwoYHdyb25nIGNyZWRlbnRpYWxzYClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgb24gaW5jb3JyZWN0IHBhc3N3b3JkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3lvdSBzaG91bGQgbm90IHJlYWNoIHRoaXMgcG9pbnQnKVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKGB3cm9uZyBjcmVkZW50aWFsc2ApXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgZmFpbCB3aGVuIHVzZXIgZG9lcyBub3QgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGVtYWlsID0gYGVtYWlsLSR7cmFuZG9tKCl9QG1haWwuY29tYFxuICAgICAgICBwYXNzd29yZCA9IGBwYXNzd29yZC0ke3JhbmRvbSgpfWBcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZClcblxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigneW91IHNob3VsZCBub3QgcmVhY2ggdGhpcyBwb2ludCcpXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uZXhpc3RcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXF1YWwoYHdyb25nIGNyZWRlbnRpYWxzYClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBkZXNjcmliZSgndW5oYXBweSBwYXRocycsICgpID0+IHtcblxuICAgICAgICAgICAgaXQoJ3Nob3VsZCBmYWlsIG9uIGEgbm9uLXN0cmluZyBhbmQgbm9uLXZhbGlkIGVtYWlsJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGVtYWlsID0gMVxuICAgICAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgICAgICkudG8udGhyb3coVHlwZUVycm9yLCBgZW1haWwgJHtlbWFpbH0gaXMgbm90IGEgc3RyaW5nYClcbiAgICBcbiAgICAgICAgICAgICAgICBlbWFpbCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgZXhwZWN0KCgpID0+IFxuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZClcbiAgICAgICAgICAgICAgICAgICAgKS50by50aHJvdyhUeXBlRXJyb3IsIGBlbWFpbCAke2VtYWlsfSBpcyBub3QgYSBzdHJpbmdgKVxuICAgIFxuICAgICAgICAgICAgICAgIGVtYWlsID0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgZXhwZWN0KCgpID0+IFxuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZClcbiAgICAgICAgICAgICAgICAgICAgKS50by50aHJvdyhUeXBlRXJyb3IsIGBlbWFpbCAke2VtYWlsfSBpcyBub3QgYSBzdHJpbmdgKVxuICAgIFxuICAgICAgICAgICAgICAgIGVtYWlsID0gW11cbiAgICAgICAgICAgICAgICBleHBlY3QoKCkgPT4gXG4gICAgICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKVxuICAgICAgICAgICAgICAgICAgICApLnRvLnRocm93KFR5cGVFcnJvciwgYGVtYWlsICR7ZW1haWx9IGlzIG5vdCBhIHN0cmluZ2ApXG4gICAgXG4gICAgICAgICAgICAgICAgZW1haWwgPSAna2Zqc25ma3NkbidcbiAgICAgICAgICAgICAgICBleHBlY3QoKCkgPT4gXG4gICAgICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKVxuICAgICAgICAgICAgICAgICAgICApLnRvLnRocm93KENvbnRlbnRFcnJvciwgYCR7ZW1haWx9IGlzIG5vdCBhbiBlLW1haWxgKVxuICAgIFxuICAgICAgICAgICAgICAgIGVtYWlsID0gJ2tmanNuZmtzZG5AMTIzJ1xuICAgICAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgICAgICkudG8udGhyb3coQ29udGVudEVycm9yLCBgJHtlbWFpbH0gaXMgbm90IGFuIGUtbWFpbGApXG4gICAgICAgICAgICB9KVxuICAgIFxuICAgICAgICAgICAgaXQoJ3Nob3VsZCBmYWlsIG9uIGEgbm9uLXN0cmluZyBwYXNzd29yZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBwYXNzd29yZCA9IDFcbiAgICAgICAgICAgICAgICBleHBlY3QoKCkgPT4gXG4gICAgICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKVxuICAgICAgICAgICAgICAgICAgICApLnRvLnRocm93KFR5cGVFcnJvciwgYHBhc3N3b3JkICR7cGFzc3dvcmR9IGlzIG5vdCBhIHN0cmluZ2ApXG4gICAgXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQgPSBmYWxzZVxuICAgICAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgICAgICkudG8udGhyb3coVHlwZUVycm9yLCBgcGFzc3dvcmQgJHtwYXNzd29yZH0gaXMgbm90IGEgc3RyaW5nYClcbiAgICBcbiAgICAgICAgICAgICAgICBwYXNzd29yZCA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgICAgICkudG8udGhyb3coVHlwZUVycm9yLCBgcGFzc3dvcmQgJHtwYXNzd29yZH0gaXMgbm90IGEgc3RyaW5nYClcbiAgICBcbiAgICAgICAgICAgICAgICBwYXNzd29yZCA9IFtdXG4gICAgICAgICAgICAgICAgZXhwZWN0KCgpID0+IFxuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZClcbiAgICAgICAgICAgICAgICAgICAgKS50by50aHJvdyhUeXBlRXJyb3IsIGBwYXNzd29yZCAke3Bhc3N3b3JkfSBpcyBub3QgYSBzdHJpbmdgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcblxuICAgIGFmdGVyKGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKFVzZXIuZGVsZXRlTWFueSgpKVxuICAgICAgICByZXR1cm4gYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpXG4gICAgfSlcbn0pIl19