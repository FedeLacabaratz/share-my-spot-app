function cov_2o01c9311x(){var path="/Users/federicolacabaratz/bootcamp/collab/skylab-bootcamp-202001/staff/federico-lacabaratz/share-my-spot/share-my-spot-api/logic/create-spot.js";var hash="e96db854a7bd84ebf4874ae6eac4920c4ae38bd5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/federicolacabaratz/bootcamp/collab/skylab-bootcamp-202001/staff/federico-lacabaratz/share-my-spot/share-my-spot-api/logic/create-spot.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:51}},"1":{start:{line:2,column:35},end:{line:2,column:64}},"2":{start:{line:3,column:11},end:{line:3,column:33}},"3":{start:{line:4,column:13},end:{line:4,column:28}},"4":{start:{line:5,column:26},end:{line:5,column:57}},"5":{start:{line:39,column:17},end:{line:39,column:54}},"6":{start:{line:41,column:0},end:{line:119,column:1}},"7":{start:{line:42,column:4},end:{line:42,column:47}},"8":{start:{line:43,column:4},end:{line:43,column:35}},"9":{start:{line:44,column:4},end:{line:44,column:55}},"10":{start:{line:45,column:4},end:{line:45,column:55}},"11":{start:{line:46,column:4},end:{line:46,column:49}},"12":{start:{line:47,column:4},end:{line:47,column:43}},"13":{start:{line:48,column:4},end:{line:48,column:41}},"14":{start:{line:49,column:4},end:{line:49,column:43}},"15":{start:{line:50,column:4},end:{line:50,column:39}},"16":{start:{line:51,column:4},end:{line:51,column:47}},"17":{start:{line:52,column:4},end:{line:52,column:41}},"18":{start:{line:54,column:4},end:{line:57,column:5}},"19":{start:{line:55,column:8},end:{line:55,column:78}},"20":{start:{line:56,column:8},end:{line:56,column:62}},"21":{start:{line:59,column:4},end:{line:62,column:5}},"22":{start:{line:60,column:8},end:{line:60,column:75}},"23":{start:{line:61,column:8},end:{line:61,column:60}},"24":{start:{line:64,column:4},end:{line:67,column:5}},"25":{start:{line:65,column:8},end:{line:65,column:66}},"26":{start:{line:66,column:8},end:{line:66,column:54}},"27":{start:{line:69,column:4},end:{line:69,column:45}},"28":{start:{line:70,column:4},end:{line:70,column:41}},"29":{start:{line:72,column:4},end:{line:75,column:5}},"30":{start:{line:73,column:8},end:{line:73,column:48}},"31":{start:{line:74,column:8},end:{line:74,column:42}},"32":{start:{line:77,column:4},end:{line:80,column:5}},"33":{start:{line:78,column:8},end:{line:78,column:48}},"34":{start:{line:79,column:8},end:{line:79,column:42}},"35":{start:{line:82,column:4},end:{line:85,column:5}},"36":{start:{line:83,column:8},end:{line:83,column:48}},"37":{start:{line:84,column:8},end:{line:84,column:42}},"38":{start:{line:87,column:4},end:{line:90,column:5}},"39":{start:{line:88,column:8},end:{line:88,column:48}},"40":{start:{line:89,column:8},end:{line:89,column:42}},"41":{start:{line:92,column:4},end:{line:95,column:5}},"42":{start:{line:93,column:8},end:{line:93,column:48}},"43":{start:{line:94,column:8},end:{line:94,column:42}},"44":{start:{line:97,column:4},end:{line:100,column:5}},"45":{start:{line:98,column:8},end:{line:98,column:48}},"46":{start:{line:99,column:8},end:{line:99,column:42}},"47":{start:{line:102,column:4},end:{line:105,column:5}},"48":{start:{line:103,column:8},end:{line:103,column:48}},"49":{start:{line:104,column:8},end:{line:104,column:42}},"50":{start:{line:107,column:4},end:{line:118,column:10}},"51":{start:{line:109,column:12},end:{line:109,column:92}},"52":{start:{line:109,column:23},end:{line:109,column:92}},"53":{start:{line:111,column:25},end:{line:111,column:270}},"54":{start:{line:113,column:12},end:{line:113,column:45}},"55":{start:{line:115,column:12},end:{line:117,column:36}},"56":{start:{line:116,column:28},end:{line:116,column:66}},"57":{start:{line:117,column:28},end:{line:117,column:35}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:41,column:17},end:{line:41,column:18}},loc:{start:{line:41,column:235},end:{line:119,column:1}},line:41},"1":{name:"(anonymous_1)",decl:{start:{line:108,column:14},end:{line:108,column:15}},loc:{start:{line:108,column:22},end:{line:118,column:9}},line:108},"2":{name:"(anonymous_2)",decl:{start:{line:116,column:22},end:{line:116,column:23}},loc:{start:{line:116,column:28},end:{line:116,column:66}},line:116},"3":{name:"(anonymous_3)",decl:{start:{line:117,column:22},end:{line:117,column:23}},loc:{start:{line:117,column:28},end:{line:117,column:35}},line:117}},branchMap:{"0":{loc:{start:{line:54,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:57,column:5}},{start:{line:54,column:4},end:{line:57,column:5}}],line:54},"1":{loc:{start:{line:55,column:8},end:{line:55,column:78}},type:"cond-expr",locations:[{start:{line:55,column:34},end:{line:55,column:54}},{start:{line:55,column:57},end:{line:55,column:78}}],line:55},"2":{loc:{start:{line:59,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:59,column:4},end:{line:62,column:5}},{start:{line:59,column:4},end:{line:62,column:5}}],line:59},"3":{loc:{start:{line:60,column:8},end:{line:60,column:75}},type:"cond-expr",locations:[{start:{line:60,column:33},end:{line:60,column:52}},{start:{line:60,column:55},end:{line:60,column:75}}],line:60},"4":{loc:{start:{line:64,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:64,column:4},end:{line:67,column:5}},{start:{line:64,column:4},end:{line:67,column:5}}],line:64},"5":{loc:{start:{line:65,column:8},end:{line:65,column:66}},type:"cond-expr",locations:[{start:{line:65,column:30},end:{line:65,column:46}},{start:{line:65,column:49},end:{line:65,column:66}}],line:65},"6":{loc:{start:{line:72,column:4},end:{line:75,column:5}},type:"if",locations:[{start:{line:72,column:4},end:{line:75,column:5}},{start:{line:72,column:4},end:{line:75,column:5}}],line:72},"7":{loc:{start:{line:73,column:8},end:{line:73,column:48}},type:"cond-expr",locations:[{start:{line:73,column:24},end:{line:73,column:34}},{start:{line:73,column:37},end:{line:73,column:48}}],line:73},"8":{loc:{start:{line:77,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:80,column:5}},{start:{line:77,column:4},end:{line:80,column:5}}],line:77},"9":{loc:{start:{line:78,column:8},end:{line:78,column:48}},type:"cond-expr",locations:[{start:{line:78,column:24},end:{line:78,column:34}},{start:{line:78,column:37},end:{line:78,column:48}}],line:78},"10":{loc:{start:{line:82,column:4},end:{line:85,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:85,column:5}},{start:{line:82,column:4},end:{line:85,column:5}}],line:82},"11":{loc:{start:{line:83,column:8},end:{line:83,column:48}},type:"cond-expr",locations:[{start:{line:83,column:24},end:{line:83,column:34}},{start:{line:83,column:37},end:{line:83,column:48}}],line:83},"12":{loc:{start:{line:87,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:90,column:5}},{start:{line:87,column:4},end:{line:90,column:5}}],line:87},"13":{loc:{start:{line:88,column:8},end:{line:88,column:48}},type:"cond-expr",locations:[{start:{line:88,column:24},end:{line:88,column:34}},{start:{line:88,column:37},end:{line:88,column:48}}],line:88},"14":{loc:{start:{line:92,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:92,column:4},end:{line:95,column:5}},{start:{line:92,column:4},end:{line:95,column:5}}],line:92},"15":{loc:{start:{line:93,column:8},end:{line:93,column:48}},type:"cond-expr",locations:[{start:{line:93,column:24},end:{line:93,column:34}},{start:{line:93,column:37},end:{line:93,column:48}}],line:93},"16":{loc:{start:{line:97,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:100,column:5}},{start:{line:97,column:4},end:{line:100,column:5}}],line:97},"17":{loc:{start:{line:98,column:8},end:{line:98,column:48}},type:"cond-expr",locations:[{start:{line:98,column:24},end:{line:98,column:34}},{start:{line:98,column:37},end:{line:98,column:48}}],line:98},"18":{loc:{start:{line:102,column:4},end:{line:105,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:105,column:5}},{start:{line:102,column:4},end:{line:105,column:5}}],line:102},"19":{loc:{start:{line:103,column:8},end:{line:103,column:48}},type:"cond-expr",locations:[{start:{line:103,column:24},end:{line:103,column:34}},{start:{line:103,column:37},end:{line:103,column:48}}],line:103},"20":{loc:{start:{line:109,column:12},end:{line:109,column:92}},type:"if",locations:[{start:{line:109,column:12},end:{line:109,column:92}},{start:{line:109,column:12},end:{line:109,column:92}}],line:109}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e96db854a7bd84ebf4874ae6eac4920c4ae38bd5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_2o01c9311x=function(){return actualCoverage;};return actualCoverage;}cov_2o01c9311x();const{validate}=(cov_2o01c9311x().s[0]++,require('share-my-spot-utils'));const{models:{User,Spot}}=(cov_2o01c9311x().s[1]++,require('share-my-spot-data'));const fs=(cov_2o01c9311x().s[2]++,require('fs').promises);const path=(cov_2o01c9311x().s[3]++,require('path'));const{NotFoundError}=(cov_2o01c9311x().s[4]++,require('share-my-spot-errors'));/**
 * Creates a new spot
 * 
 * @param {string} publisherId spot's unique id user's number (owner)
 * @param {string} title spot's title
 * @param {string} addressLocation spot's address location
 * @param {string} addressStNumber spot's address street & number
 * @param {string} addressOther spot's address other information
 * @param {number} length spot's length (mt)
 * @param {number} width spot's width (mt)
 * @param {number} height spot's height (mt)
 * @param {number} area spot's area (mt)
 * @param {string} description spot's description information
 * @param {number} price spot's price (€/hr)
 * @param {boolean} acceptsBarker spot's option in case the owner accepts barker exchange
 * @param {boolean} surveillance spot's option in case the owner place has its own surveillance
 * @param {boolean} isCovered spot's option in case the owner place is covered
 * @param {string} hourStarts hour to be set to start availability of occupancy
 * @param {string} hourStarts hour to be set to end availability of occupancy
 * @param {boolean} mon day of the week (Monday), to be set to specify availability of occupancy for that specific day
 * @param {boolean} tue day of the week (Tuesday), to be set to specify availability of occupancy for that specific day
 * @param {boolean} wed day of the week (Wednesday), to be set to specify availability of occupancy for that specific day
 * @param {boolean} thu day of the week (Thursday), to be set to specify availability of occupancy for that specific day
 * @param {boolean} fri day of the week (Friday), to be set to specify availability of occupancy for that specific day
 * @param {boolean} sat day of the week (Saturday), to be set to specify availability of occupancy for that specific day
 * @param {boolean} sun day of the week (Sunday), to be set to specify availability of occupancy for that specific day
 * 
 * @returns {Promise<string>} returns an empty Promise on a successful spot creation
 * 
 * @throws {NotFoundError} if the user does not exist
 */const filesDir=(cov_2o01c9311x().s[5]++,path.join(__dirname,`../data/spots`));cov_2o01c9311x().s[6]++;module.exports=(publisherId,title,addressLocation,addressStNumber,addressOther,length,width,height,area,description,price,acceptsBarker,surveillance,isCovered,hourStarts,hourEnds,mon,tue,wed,thu,fri,sat,sun)=>{cov_2o01c9311x().f[0]++;cov_2o01c9311x().s[7]++;validate.string(publisherId,'publisherId');cov_2o01c9311x().s[8]++;validate.string(title,'title');cov_2o01c9311x().s[9]++;validate.string(addressLocation,'addressLocation');cov_2o01c9311x().s[10]++;validate.string(addressStNumber,'addressStNumber');cov_2o01c9311x().s[11]++;validate.string(addressOther,'addressOther');cov_2o01c9311x().s[12]++;validate.type(length,'length',Number);cov_2o01c9311x().s[13]++;validate.type(width,'width',Number);cov_2o01c9311x().s[14]++;validate.type(height,'height',Number);cov_2o01c9311x().s[15]++;validate.type(area,'area',Number);cov_2o01c9311x().s[16]++;validate.string(description,'description');cov_2o01c9311x().s[17]++;validate.type(price,'price',Number);cov_2o01c9311x().s[18]++;if(typeof acceptsBarker!=='undefined'){cov_2o01c9311x().b[0][0]++;cov_2o01c9311x().s[19]++;acceptsBarker==='yes'?(cov_2o01c9311x().b[1][0]++,acceptsBarker=true):(cov_2o01c9311x().b[1][1]++,acceptsBarker=false);cov_2o01c9311x().s[20]++;validate.type(acceptsBarker,'acceptsBarker',Boolean);}else{cov_2o01c9311x().b[0][1]++;}cov_2o01c9311x().s[21]++;if(typeof surveillance!=='undefined'){cov_2o01c9311x().b[2][0]++;cov_2o01c9311x().s[22]++;surveillance==='yes'?(cov_2o01c9311x().b[3][0]++,surveillance=true):(cov_2o01c9311x().b[3][1]++,surveillance=false);cov_2o01c9311x().s[23]++;validate.type(surveillance,'surveillance',Boolean);}else{cov_2o01c9311x().b[2][1]++;}cov_2o01c9311x().s[24]++;if(typeof isCovered!=='undefined'){cov_2o01c9311x().b[4][0]++;cov_2o01c9311x().s[25]++;isCovered==='yes'?(cov_2o01c9311x().b[5][0]++,isCovered=true):(cov_2o01c9311x().b[5][1]++,isCovered=false);cov_2o01c9311x().s[26]++;validate.type(isCovered,'isCovered',Boolean);}else{cov_2o01c9311x().b[4][1]++;}cov_2o01c9311x().s[27]++;validate.string(hourStarts,'hourStarts');cov_2o01c9311x().s[28]++;validate.string(hourEnds,'hourEnds');cov_2o01c9311x().s[29]++;if(typeof mon!=='undefined'){cov_2o01c9311x().b[6][0]++;cov_2o01c9311x().s[30]++;mon==='yes'?(cov_2o01c9311x().b[7][0]++,mon=true):(cov_2o01c9311x().b[7][1]++,mon=false);cov_2o01c9311x().s[31]++;validate.type(mon,'mon',Boolean);}else{cov_2o01c9311x().b[6][1]++;}cov_2o01c9311x().s[32]++;if(typeof tue!=='undefined'){cov_2o01c9311x().b[8][0]++;cov_2o01c9311x().s[33]++;tue==='yes'?(cov_2o01c9311x().b[9][0]++,tue=true):(cov_2o01c9311x().b[9][1]++,tue=false);cov_2o01c9311x().s[34]++;validate.type(tue,'tue',Boolean);}else{cov_2o01c9311x().b[8][1]++;}cov_2o01c9311x().s[35]++;if(typeof wed!=='undefined'){cov_2o01c9311x().b[10][0]++;cov_2o01c9311x().s[36]++;wed==='yes'?(cov_2o01c9311x().b[11][0]++,wed=true):(cov_2o01c9311x().b[11][1]++,wed=false);cov_2o01c9311x().s[37]++;validate.type(wed,'wed',Boolean);}else{cov_2o01c9311x().b[10][1]++;}cov_2o01c9311x().s[38]++;if(typeof thu!=='undefined'){cov_2o01c9311x().b[12][0]++;cov_2o01c9311x().s[39]++;thu==='yes'?(cov_2o01c9311x().b[13][0]++,thu=true):(cov_2o01c9311x().b[13][1]++,thu=false);cov_2o01c9311x().s[40]++;validate.type(thu,'thu',Boolean);}else{cov_2o01c9311x().b[12][1]++;}cov_2o01c9311x().s[41]++;if(typeof fri!=='undefined'){cov_2o01c9311x().b[14][0]++;cov_2o01c9311x().s[42]++;fri==='yes'?(cov_2o01c9311x().b[15][0]++,fri=true):(cov_2o01c9311x().b[15][1]++,fri=false);cov_2o01c9311x().s[43]++;validate.type(fri,'fri',Boolean);}else{cov_2o01c9311x().b[14][1]++;}cov_2o01c9311x().s[44]++;if(typeof sat!=='undefined'){cov_2o01c9311x().b[16][0]++;cov_2o01c9311x().s[45]++;sat==='yes'?(cov_2o01c9311x().b[17][0]++,sat=true):(cov_2o01c9311x().b[17][1]++,sat=false);cov_2o01c9311x().s[46]++;validate.type(sat,'sat',Boolean);}else{cov_2o01c9311x().b[16][1]++;}cov_2o01c9311x().s[47]++;if(typeof sun!=='undefined'){cov_2o01c9311x().b[18][0]++;cov_2o01c9311x().s[48]++;sun==='yes'?(cov_2o01c9311x().b[19][0]++,sun=true):(cov_2o01c9311x().b[19][1]++,sun=false);cov_2o01c9311x().s[49]++;validate.type(sun,'sun',Boolean);}else{cov_2o01c9311x().b[18][1]++;}cov_2o01c9311x().s[50]++;return User.findById(publisherId).then(user=>{cov_2o01c9311x().f[1]++;cov_2o01c9311x().s[51]++;if(!user){cov_2o01c9311x().b[20][0]++;cov_2o01c9311x().s[52]++;throw new NotFoundError(`user with id ${publisherId} does not exist`);}else{cov_2o01c9311x().b[20][1]++;}const spot=(cov_2o01c9311x().s[53]++,new Spot({publisherId,title,addressLocation,addressStNumber,addressOther,length,width,height,area,description,price,acceptsBarker,surveillance,isCovered,hourStarts,hourEnds,mon,tue,wed,thu,fri,sat,sun,created:new Date()}));cov_2o01c9311x().s[54]++;user.publishedSpots.push(spot.id);cov_2o01c9311x().s[55]++;return Promise.all([user.save(),spot.save()]).then(()=>{cov_2o01c9311x().f[2]++;cov_2o01c9311x().s[56]++;return fs.mkdir(path.join(filesDir,spot.id));}).then(()=>{cov_2o01c9311x().f[3]++;cov_2o01c9311x().s[57]++;return spot.id;});});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZS1zcG90LmpzIl0sIm5hbWVzIjpbInZhbGlkYXRlIiwicmVxdWlyZSIsIm1vZGVscyIsIlVzZXIiLCJTcG90IiwiZnMiLCJwcm9taXNlcyIsInBhdGgiLCJOb3RGb3VuZEVycm9yIiwiZmlsZXNEaXIiLCJqb2luIiwiX19kaXJuYW1lIiwibW9kdWxlIiwiZXhwb3J0cyIsInB1Ymxpc2hlcklkIiwidGl0bGUiLCJhZGRyZXNzTG9jYXRpb24iLCJhZGRyZXNzU3ROdW1iZXIiLCJhZGRyZXNzT3RoZXIiLCJsZW5ndGgiLCJ3aWR0aCIsImhlaWdodCIsImFyZWEiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwiYWNjZXB0c0JhcmtlciIsInN1cnZlaWxsYW5jZSIsImlzQ292ZXJlZCIsImhvdXJTdGFydHMiLCJob3VyRW5kcyIsIm1vbiIsInR1ZSIsIndlZCIsInRodSIsImZyaSIsInNhdCIsInN1biIsInN0cmluZyIsInR5cGUiLCJOdW1iZXIiLCJCb29sZWFuIiwiZmluZEJ5SWQiLCJ0aGVuIiwidXNlciIsInNwb3QiLCJjcmVhdGVkIiwiRGF0ZSIsInB1Ymxpc2hlZFNwb3RzIiwicHVzaCIsImlkIiwiUHJvbWlzZSIsImFsbCIsInNhdmUiLCJta2RpciJdLCJtYXBwaW5ncyI6Iit5U0FBQSxLQUFNLENBQUVBLFFBQUYsMkJBQWVDLE9BQU8sQ0FBQyxxQkFBRCxDQUF0QixDQUFOLENBQ0EsS0FBTSxDQUFFQyxNQUFNLENBQUUsQ0FBRUMsSUFBRixDQUFRQyxJQUFSLENBQVYsMkJBQTZCSCxPQUFPLENBQUMsb0JBQUQsQ0FBcEMsQ0FBTixDQUNBLEtBQU1JLENBQUFBLEVBQUUsMEJBQUdKLE9BQU8sQ0FBQyxJQUFELENBQVAsQ0FBY0ssUUFBakIsQ0FBUixDQUNBLEtBQU1DLENBQUFBLElBQUksMEJBQUdOLE9BQU8sQ0FBQyxNQUFELENBQVYsQ0FBVixDQUNBLEtBQU0sQ0FBRU8sYUFBRiwyQkFBb0JQLE9BQU8sQ0FBQyxzQkFBRCxDQUEzQixDQUFOLENB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OEVDLEtBQTlFLENBQXFGQyxNQUFyRixDQUE2RkMsSUFBN0YsQ0FBbUdDLFdBQW5HLENBQWdIQyxLQUFoSCxDQUF1SEMsYUFBdkgsQ0FBc0lDLFlBQXRJLENBQW9KQyxTQUFwSixDQUErSkMsVUFBL0osQ0FBMktDLFFBQTNLLENBQXFMQyxHQUFyTCxDQUEwTEMsR0FBMUwsQ0FBK0xDLEdBQS9MLENBQW9NQyxHQUFwTSxDQUF5TUMsR0FBek0sQ0FBOE1DLEdBQTlNLENBQW1OQyxHQUFuTixDQUF3TlMsT0FBTyxDQUFFLEdBQUlDLENBQUFBLElBQUosRUFBak8sQ0FBVCxDQUFILENBQVYsQ0FIVSx5QkFLVkgsSUFBSSxDQUFDSSxjQUFMLENBQW9CQyxJQUFwQixDQUF5QkosSUFBSSxDQUFDSyxFQUE5QixFQUxVLHlCQU9WLE1BQU9DLENBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLENBQUNSLElBQUksQ0FBQ1MsSUFBTCxFQUFELENBQWNSLElBQUksQ0FBQ1EsSUFBTCxFQUFkLENBQVosRUFDRlYsSUFERSxDQUNHLElBQU0sd0RBQUFyQyxDQUFBQSxFQUFFLENBQUNnRCxLQUFILENBQVM5QyxJQUFJLENBQUNHLElBQUwsQ0FBVUQsUUFBVixDQUFvQm1DLElBQUksQ0FBQ0ssRUFBekIsQ0FBVCxFQUFzQyxDQUQvQyxFQUVGUCxJQUZFLENBRUcsSUFBTSx3REFBQUUsQ0FBQUEsSUFBSSxDQUFDSyxFQUFMLENBQU8sQ0FGaEIsQ0FBUCxDQUdILENBWEUsQ0FBUCxDQVlILENBOUVEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2YWxpZGF0ZSB9ID0gcmVxdWlyZSgnc2hhcmUtbXktc3BvdC11dGlscycpXG5jb25zdCB7IG1vZGVsczogeyBVc2VyLCBTcG90IH0gfSA9IHJlcXVpcmUoJ3NoYXJlLW15LXNwb3QtZGF0YScpXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJykucHJvbWlzZXNcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJylcbmNvbnN0IHsgTm90Rm91bmRFcnJvciB9ID0gcmVxdWlyZSgnc2hhcmUtbXktc3BvdC1lcnJvcnMnKVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgc3BvdFxuICogXG4gKiBAcGFyYW0ge3N0cmluZ30gcHVibGlzaGVySWQgc3BvdCdzIHVuaXF1ZSBpZCB1c2VyJ3MgbnVtYmVyIChvd25lcilcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZSBzcG90J3MgdGl0bGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBhZGRyZXNzTG9jYXRpb24gc3BvdCdzIGFkZHJlc3MgbG9jYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBhZGRyZXNzU3ROdW1iZXIgc3BvdCdzIGFkZHJlc3Mgc3RyZWV0ICYgbnVtYmVyXG4gKiBAcGFyYW0ge3N0cmluZ30gYWRkcmVzc090aGVyIHNwb3QncyBhZGRyZXNzIG90aGVyIGluZm9ybWF0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIHNwb3QncyBsZW5ndGggKG10KVxuICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIHNwb3QncyB3aWR0aCAobXQpXG4gKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IHNwb3QncyBoZWlnaHQgKG10KVxuICogQHBhcmFtIHtudW1iZXJ9IGFyZWEgc3BvdCdzIGFyZWEgKG10KVxuICogQHBhcmFtIHtzdHJpbmd9IGRlc2NyaXB0aW9uIHNwb3QncyBkZXNjcmlwdGlvbiBpbmZvcm1hdGlvblxuICogQHBhcmFtIHtudW1iZXJ9IHByaWNlIHNwb3QncyBwcmljZSAo4oKsL2hyKVxuICogQHBhcmFtIHtib29sZWFufSBhY2NlcHRzQmFya2VyIHNwb3QncyBvcHRpb24gaW4gY2FzZSB0aGUgb3duZXIgYWNjZXB0cyBiYXJrZXIgZXhjaGFuZ2VcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc3VydmVpbGxhbmNlIHNwb3QncyBvcHRpb24gaW4gY2FzZSB0aGUgb3duZXIgcGxhY2UgaGFzIGl0cyBvd24gc3VydmVpbGxhbmNlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzQ292ZXJlZCBzcG90J3Mgb3B0aW9uIGluIGNhc2UgdGhlIG93bmVyIHBsYWNlIGlzIGNvdmVyZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBob3VyU3RhcnRzIGhvdXIgdG8gYmUgc2V0IHRvIHN0YXJ0IGF2YWlsYWJpbGl0eSBvZiBvY2N1cGFuY3lcbiAqIEBwYXJhbSB7c3RyaW5nfSBob3VyU3RhcnRzIGhvdXIgdG8gYmUgc2V0IHRvIGVuZCBhdmFpbGFiaWxpdHkgb2Ygb2NjdXBhbmN5XG4gKiBAcGFyYW0ge2Jvb2xlYW59IG1vbiBkYXkgb2YgdGhlIHdlZWsgKE1vbmRheSksIHRvIGJlIHNldCB0byBzcGVjaWZ5IGF2YWlsYWJpbGl0eSBvZiBvY2N1cGFuY3kgZm9yIHRoYXQgc3BlY2lmaWMgZGF5XG4gKiBAcGFyYW0ge2Jvb2xlYW59IHR1ZSBkYXkgb2YgdGhlIHdlZWsgKFR1ZXNkYXkpLCB0byBiZSBzZXQgdG8gc3BlY2lmeSBhdmFpbGFiaWxpdHkgb2Ygb2NjdXBhbmN5IGZvciB0aGF0IHNwZWNpZmljIGRheVxuICogQHBhcmFtIHtib29sZWFufSB3ZWQgZGF5IG9mIHRoZSB3ZWVrIChXZWRuZXNkYXkpLCB0byBiZSBzZXQgdG8gc3BlY2lmeSBhdmFpbGFiaWxpdHkgb2Ygb2NjdXBhbmN5IGZvciB0aGF0IHNwZWNpZmljIGRheVxuICogQHBhcmFtIHtib29sZWFufSB0aHUgZGF5IG9mIHRoZSB3ZWVrIChUaHVyc2RheSksIHRvIGJlIHNldCB0byBzcGVjaWZ5IGF2YWlsYWJpbGl0eSBvZiBvY2N1cGFuY3kgZm9yIHRoYXQgc3BlY2lmaWMgZGF5XG4gKiBAcGFyYW0ge2Jvb2xlYW59IGZyaSBkYXkgb2YgdGhlIHdlZWsgKEZyaWRheSksIHRvIGJlIHNldCB0byBzcGVjaWZ5IGF2YWlsYWJpbGl0eSBvZiBvY2N1cGFuY3kgZm9yIHRoYXQgc3BlY2lmaWMgZGF5XG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNhdCBkYXkgb2YgdGhlIHdlZWsgKFNhdHVyZGF5KSwgdG8gYmUgc2V0IHRvIHNwZWNpZnkgYXZhaWxhYmlsaXR5IG9mIG9jY3VwYW5jeSBmb3IgdGhhdCBzcGVjaWZpYyBkYXlcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc3VuIGRheSBvZiB0aGUgd2VlayAoU3VuZGF5KSwgdG8gYmUgc2V0IHRvIHNwZWNpZnkgYXZhaWxhYmlsaXR5IG9mIG9jY3VwYW5jeSBmb3IgdGhhdCBzcGVjaWZpYyBkYXlcbiAqIFxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gcmV0dXJucyBhbiBlbXB0eSBQcm9taXNlIG9uIGEgc3VjY2Vzc2Z1bCBzcG90IGNyZWF0aW9uXG4gKiBcbiAqIEB0aHJvd3Mge05vdEZvdW5kRXJyb3J9IGlmIHRoZSB1c2VyIGRvZXMgbm90IGV4aXN0XG4gKi9cblxuY29uc3QgZmlsZXNEaXIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBgLi4vZGF0YS9zcG90c2ApXG5cbm1vZHVsZS5leHBvcnRzID0gKHB1Ymxpc2hlcklkLCB0aXRsZSwgYWRkcmVzc0xvY2F0aW9uLCBhZGRyZXNzU3ROdW1iZXIsIGFkZHJlc3NPdGhlciwgbGVuZ3RoLCB3aWR0aCwgaGVpZ2h0LCBhcmVhLCBkZXNjcmlwdGlvbiwgcHJpY2UsIGFjY2VwdHNCYXJrZXIsIHN1cnZlaWxsYW5jZSwgaXNDb3ZlcmVkLCBob3VyU3RhcnRzLCBob3VyRW5kcywgbW9uLCB0dWUsIHdlZCwgdGh1LCBmcmksIHNhdCwgc3VuKSA9PiB7XG4gICAgdmFsaWRhdGUuc3RyaW5nKHB1Ymxpc2hlcklkLCAncHVibGlzaGVySWQnKVxuICAgIHZhbGlkYXRlLnN0cmluZyh0aXRsZSwgJ3RpdGxlJylcbiAgICB2YWxpZGF0ZS5zdHJpbmcoYWRkcmVzc0xvY2F0aW9uLCAnYWRkcmVzc0xvY2F0aW9uJylcbiAgICB2YWxpZGF0ZS5zdHJpbmcoYWRkcmVzc1N0TnVtYmVyLCAnYWRkcmVzc1N0TnVtYmVyJylcbiAgICB2YWxpZGF0ZS5zdHJpbmcoYWRkcmVzc090aGVyLCAnYWRkcmVzc090aGVyJylcbiAgICB2YWxpZGF0ZS50eXBlKGxlbmd0aCwgJ2xlbmd0aCcsIE51bWJlcilcbiAgICB2YWxpZGF0ZS50eXBlKHdpZHRoLCAnd2lkdGgnLCBOdW1iZXIpXG4gICAgdmFsaWRhdGUudHlwZShoZWlnaHQsICdoZWlnaHQnLCBOdW1iZXIpXG4gICAgdmFsaWRhdGUudHlwZShhcmVhLCAnYXJlYScsIE51bWJlcilcbiAgICB2YWxpZGF0ZS5zdHJpbmcoZGVzY3JpcHRpb24sICdkZXNjcmlwdGlvbicpXG4gICAgdmFsaWRhdGUudHlwZShwcmljZSwgJ3ByaWNlJywgTnVtYmVyKVxuXG4gICAgaWYgKHR5cGVvZiBhY2NlcHRzQmFya2VyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBhY2NlcHRzQmFya2VyID09PSAneWVzJyA/IGFjY2VwdHNCYXJrZXIgPSB0cnVlIDogYWNjZXB0c0JhcmtlciA9IGZhbHNlXG4gICAgICAgIHZhbGlkYXRlLnR5cGUoYWNjZXB0c0JhcmtlciwgJ2FjY2VwdHNCYXJrZXInLCBCb29sZWFuKVxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygc3VydmVpbGxhbmNlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzdXJ2ZWlsbGFuY2UgPT09ICd5ZXMnID8gc3VydmVpbGxhbmNlID0gdHJ1ZSA6IHN1cnZlaWxsYW5jZSA9IGZhbHNlXG4gICAgICAgIHZhbGlkYXRlLnR5cGUoc3VydmVpbGxhbmNlLCAnc3VydmVpbGxhbmNlJywgQm9vbGVhbilcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGlzQ292ZXJlZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaXNDb3ZlcmVkID09PSAneWVzJyA/IGlzQ292ZXJlZCA9IHRydWUgOiBpc0NvdmVyZWQgPSBmYWxzZVxuICAgICAgICB2YWxpZGF0ZS50eXBlKGlzQ292ZXJlZCwgJ2lzQ292ZXJlZCcsIEJvb2xlYW4pXG4gICAgfVxuXG4gICAgdmFsaWRhdGUuc3RyaW5nKGhvdXJTdGFydHMsICdob3VyU3RhcnRzJylcbiAgICB2YWxpZGF0ZS5zdHJpbmcoaG91ckVuZHMsICdob3VyRW5kcycpXG5cbiAgICBpZiAodHlwZW9mIG1vbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbW9uID09PSAneWVzJyA/IG1vbiA9IHRydWUgOiBtb24gPSBmYWxzZVxuICAgICAgICB2YWxpZGF0ZS50eXBlKG1vbiwgJ21vbicsIEJvb2xlYW4pXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0dWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHR1ZSA9PT0gJ3llcycgPyB0dWUgPSB0cnVlIDogdHVlID0gZmFsc2VcbiAgICAgICAgdmFsaWRhdGUudHlwZSh0dWUsICd0dWUnLCBCb29sZWFuKVxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygd2VkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3ZWQgPT09ICd5ZXMnID8gd2VkID0gdHJ1ZSA6IHdlZCA9IGZhbHNlXG4gICAgICAgIHZhbGlkYXRlLnR5cGUod2VkLCAnd2VkJywgQm9vbGVhbilcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRodSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGh1ID09PSAneWVzJyA/IHRodSA9IHRydWUgOiB0aHUgPSBmYWxzZVxuICAgICAgICB2YWxpZGF0ZS50eXBlKHRodSwgJ3RodScsIEJvb2xlYW4pXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBmcmkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGZyaSA9PT0gJ3llcycgPyBmcmkgPSB0cnVlIDogZnJpID0gZmFsc2VcbiAgICAgICAgdmFsaWRhdGUudHlwZShmcmksICdmcmknLCBCb29sZWFuKVxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygc2F0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzYXQgPT09ICd5ZXMnID8gc2F0ID0gdHJ1ZSA6IHNhdCA9IGZhbHNlXG4gICAgICAgIHZhbGlkYXRlLnR5cGUoc2F0LCAnc2F0JywgQm9vbGVhbilcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHN1biAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc3VuID09PSAneWVzJyA/IHN1biA9IHRydWUgOiBzdW4gPSBmYWxzZVxuICAgICAgICB2YWxpZGF0ZS50eXBlKHN1biwgJ3N1bicsIEJvb2xlYW4pXG4gICAgfVxuXG4gICAgcmV0dXJuIFVzZXIuZmluZEJ5SWQocHVibGlzaGVySWQpXG4gICAgICAgIC50aGVuKHVzZXIgPT4ge1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB0aHJvdyBuZXcgTm90Rm91bmRFcnJvcihgdXNlciB3aXRoIGlkICR7cHVibGlzaGVySWR9IGRvZXMgbm90IGV4aXN0YClcblxuICAgICAgICAgICAgY29uc3Qgc3BvdCA9IG5ldyBTcG90KHsgcHVibGlzaGVySWQsIHRpdGxlLCBhZGRyZXNzTG9jYXRpb24sIGFkZHJlc3NTdE51bWJlciwgYWRkcmVzc090aGVyLCBsZW5ndGgsIHdpZHRoLCBoZWlnaHQsIGFyZWEsIGRlc2NyaXB0aW9uLCBwcmljZSwgYWNjZXB0c0Jhcmtlciwgc3VydmVpbGxhbmNlLCBpc0NvdmVyZWQsIGhvdXJTdGFydHMsIGhvdXJFbmRzLCBtb24sIHR1ZSwgd2VkLCB0aHUsIGZyaSwgc2F0LCBzdW4sIGNyZWF0ZWQ6IG5ldyBEYXRlIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHVzZXIucHVibGlzaGVkU3BvdHMucHVzaChzcG90LmlkKVxuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3VzZXIuc2F2ZSgpLCBzcG90LnNhdmUoKV0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gZnMubWtkaXIocGF0aC5qb2luKGZpbGVzRGlyLCBzcG90LmlkKSkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gc3BvdC5pZClcbiAgICAgICAgfSlcbn1cbiJdfQ==