function cov_63pfolahs(){var path="/Users/federicolacabaratz/bootcamp/collab/skylab-bootcamp-202001/staff/federico-lacabaratz/share-my-spot/share-my-spot-api/logic/retrieve-published-spots.js";var hash="e5241798afa6f307e1a44cf76a2bdec956cb1e1a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/federicolacabaratz/bootcamp/collab/skylab-bootcamp-202001/staff/federico-lacabaratz/share-my-spot/share-my-spot-api/logic/retrieve-published-spots.js",statementMap:{"0":{start:{line:1,column:35},end:{line:1,column:64}},"1":{start:{line:2,column:21},end:{line:2,column:51}},"2":{start:{line:3,column:26},end:{line:3,column:57}},"3":{start:{line:15,column:0},end:{line:36,column:1}},"4":{start:{line:16,column:4},end:{line:16,column:29}},"5":{start:{line:18,column:4},end:{line:35,column:10}},"6":{start:{line:20,column:12},end:{line:20,column:78}},"7":{start:{line:20,column:23},end:{line:20,column:78}},"8":{start:{line:21,column:12},end:{line:34,column:18}},"9":{start:{line:24,column:20},end:{line:24,column:100}},"10":{start:{line:24,column:32},end:{line:24,column:100}},"11":{start:{line:25,column:20},end:{line:32,column:22}},"12":{start:{line:26,column:24},end:{line:26,column:53}},"13":{start:{line:27,column:24},end:{line:27,column:77}},"14":{start:{line:29,column:24},end:{line:29,column:39}},"15":{start:{line:30,column:24},end:{line:30,column:39}},"16":{start:{line:33,column:20},end:{line:33,column:32}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:15,column:17},end:{line:15,column:18}},loc:{start:{line:15,column:23},end:{line:36,column:1}},line:15},"1":{name:"(anonymous_1)",decl:{start:{line:19,column:14},end:{line:19,column:15}},loc:{start:{line:19,column:22},end:{line:35,column:9}},line:19},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:22},end:{line:23,column:23}},loc:{start:{line:23,column:31},end:{line:34,column:17}},line:23},"3":{name:"(anonymous_3)",decl:{start:{line:25,column:34},end:{line:25,column:35}},loc:{start:{line:25,column:42},end:{line:32,column:21}},line:25}},branchMap:{"0":{loc:{start:{line:20,column:12},end:{line:20,column:78}},type:"if",locations:[{start:{line:20,column:12},end:{line:20,column:78}},{start:{line:20,column:12},end:{line:20,column:78}}],line:20},"1":{loc:{start:{line:24,column:20},end:{line:24,column:100}},type:"if",locations:[{start:{line:24,column:20},end:{line:24,column:100}},{start:{line:24,column:20},end:{line:24,column:100}}],line:24}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e5241798afa6f307e1a44cf76a2bdec956cb1e1a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_63pfolahs=function(){return actualCoverage;};return actualCoverage;}cov_63pfolahs();const{models:{User,Spot}}=(cov_63pfolahs().s[0]++,require('share-my-spot-data'));const{validate}=(cov_63pfolahs().s[1]++,require('share-my-spot-utils'));const{NotFoundError}=(cov_63pfolahs().s[2]++,require('share-my-spot-errors'));/**
 * Retrieves the spots I have published
 * 
 * @param {string} id user's unique id number (candidate)
 * 
 * @returns {Promise<string>} returns the spots that have created
 * 
 * @throws {NotFoundError} on not found user id or spots created with this user id
 */cov_63pfolahs().s[3]++;module.exports=id=>{cov_63pfolahs().f[0]++;cov_63pfolahs().s[4]++;validate.string(id,'id');cov_63pfolahs().s[5]++;return User.findById(id).then(user=>{cov_63pfolahs().f[1]++;cov_63pfolahs().s[6]++;if(!user){cov_63pfolahs().b[0][0]++;cov_63pfolahs().s[7]++;throw new NotFoundError(`user with id ${id} not found`);}else{cov_63pfolahs().b[0][1]++;}cov_63pfolahs().s[8]++;return Spot.find({publisherId:id,created:{$lte:new Date()}}).populate("publisherId","name surname email phone").sort({created:-1}).lean().then(spots=>{cov_63pfolahs().f[2]++;cov_63pfolahs().s[9]++;if(!spots){cov_63pfolahs().b[1][0]++;cov_63pfolahs().s[10]++;throw new NotFoundError(`no spots were found matching your request`);}else{cov_63pfolahs().b[1][1]++;}cov_63pfolahs().s[11]++;spots.forEach(spot=>{cov_63pfolahs().f[3]++;cov_63pfolahs().s[12]++;spot.id=spot._id.toString();cov_63pfolahs().s[13]++;spot.publisherId.id=spot.publisherId._id.toString();cov_63pfolahs().s[14]++;delete spot._id;cov_63pfolahs().s[15]++;delete spot.__v;});cov_63pfolahs().s[16]++;return spots;});});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXB1Ymxpc2hlZC1zcG90cy5qcyJdLCJuYW1lcyI6WyJtb2RlbHMiLCJVc2VyIiwiU3BvdCIsInJlcXVpcmUiLCJ2YWxpZGF0ZSIsIk5vdEZvdW5kRXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIiwiaWQiLCJzdHJpbmciLCJmaW5kQnlJZCIsInRoZW4iLCJ1c2VyIiwiZmluZCIsInB1Ymxpc2hlcklkIiwiY3JlYXRlZCIsIiRsdGUiLCJEYXRlIiwicG9wdWxhdGUiLCJzb3J0IiwibGVhbiIsInNwb3RzIiwiZm9yRWFjaCIsInNwb3QiLCJfaWQiLCJ0b1N0cmluZyIsIl9fdiJdLCJtYXBwaW5ncyI6Imk2RkFBQSxLQUFNLENBQUVBLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQVFDLElBQVIsQ0FBViwwQkFBNkJDLE9BQU8sQ0FBQyxvQkFBRCxDQUFwQyxDQUFOLENBQ0EsS0FBTSxDQUFFQyxRQUFGLDBCQUFlRCxPQUFPLENBQUMscUJBQUQsQ0FBdEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUUsYUFBRiwwQkFBb0JGLE9BQU8sQ0FBQyxzQkFBRCxDQUEzQixDQUFOLENBRUE7Ozs7Ozs7OzBCQVVBRyxNQUFNLENBQUNDLE9BQVAsQ0FBaUJDLEVBQUUsRUFBSSwrQ0FDbkJKLFFBQVEsQ0FBQ0ssTUFBVCxDQUFnQkQsRUFBaEIsQ0FBb0IsSUFBcEIsRUFEbUIsdUJBR25CLE1BQU9QLENBQUFBLElBQUksQ0FBQ1MsUUFBTCxDQUFjRixFQUFkLEVBQ0ZHLElBREUsQ0FDR0MsSUFBSSxFQUFJLCtDQUNWLEdBQUksQ0FBQ0EsSUFBTCxDQUFXLHVEQUFNLElBQUlQLENBQUFBLGFBQUosQ0FBbUIsZ0JBQWVHLEVBQUcsWUFBckMsQ0FBTixDQUF1RCxDQUFsRSxnQ0FEVSx1QkFFVixNQUFPTixDQUFBQSxJQUFJLENBQUNXLElBQUwsQ0FBVSxDQUFFQyxXQUFXLENBQUVOLEVBQWYsQ0FBbUJPLE9BQU8sQ0FBRSxDQUFFQyxJQUFJLENBQUUsR0FBSUMsQ0FBQUEsSUFBSixFQUFSLENBQTVCLENBQVYsRUFBNERDLFFBQTVELENBQXFFLGFBQXJFLENBQW9GLDBCQUFwRixFQUFnSEMsSUFBaEgsQ0FBcUgsQ0FBRUosT0FBTyxDQUFFLENBQUMsQ0FBWixDQUFySCxFQUNGSyxJQURFLEdBRUZULElBRkUsQ0FFR1UsS0FBSyxFQUFJLCtDQUNYLEdBQUksQ0FBQ0EsS0FBTCxDQUFZLHdEQUFNLElBQUloQixDQUFBQSxhQUFKLENBQW1CLDJDQUFuQixDQUFOLENBQW9FLENBQWhGLGdDQURXLHdCQUVYZ0IsS0FBSyxDQUFDQyxPQUFOLENBQWNDLElBQUksRUFBSSxnREFDbEJBLElBQUksQ0FBQ2YsRUFBTCxDQUFVZSxJQUFJLENBQUNDLEdBQUwsQ0FBU0MsUUFBVCxFQUFWLENBRGtCLHdCQUVsQkYsSUFBSSxDQUFDVCxXQUFMLENBQWlCTixFQUFqQixDQUFzQmUsSUFBSSxDQUFDVCxXQUFMLENBQWlCVSxHQUFqQixDQUFxQkMsUUFBckIsRUFBdEIsQ0FGa0Isd0JBSWxCLE1BQU9GLENBQUFBLElBQUksQ0FBQ0MsR0FBWixDQUprQix3QkFLbEIsTUFBT0QsQ0FBQUEsSUFBSSxDQUFDRyxHQUFaLENBRUgsQ0FQRCxFQUZXLHdCQVVYLE1BQU9MLENBQUFBLEtBQVAsQ0FDSCxDQWJFLENBQVAsQ0FjSCxDQWpCRSxDQUFQLENBa0JILENBckJEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBtb2RlbHM6IHsgVXNlciwgU3BvdCB9IH0gPSByZXF1aXJlKCdzaGFyZS1teS1zcG90LWRhdGEnKVxuY29uc3QgeyB2YWxpZGF0ZSB9ID0gcmVxdWlyZSgnc2hhcmUtbXktc3BvdC11dGlscycpXG5jb25zdCB7IE5vdEZvdW5kRXJyb3IgfSA9IHJlcXVpcmUoJ3NoYXJlLW15LXNwb3QtZXJyb3JzJylcblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIHNwb3RzIEkgaGF2ZSBwdWJsaXNoZWRcbiAqIFxuICogQHBhcmFtIHtzdHJpbmd9IGlkIHVzZXIncyB1bmlxdWUgaWQgbnVtYmVyIChjYW5kaWRhdGUpXG4gKiBcbiAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IHJldHVybnMgdGhlIHNwb3RzIHRoYXQgaGF2ZSBjcmVhdGVkXG4gKiBcbiAqIEB0aHJvd3Mge05vdEZvdW5kRXJyb3J9IG9uIG5vdCBmb3VuZCB1c2VyIGlkIG9yIHNwb3RzIGNyZWF0ZWQgd2l0aCB0aGlzIHVzZXIgaWRcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlkID0+IHtcbiAgICB2YWxpZGF0ZS5zdHJpbmcoaWQsICdpZCcpXG5cbiAgICByZXR1cm4gVXNlci5maW5kQnlJZChpZClcbiAgICAgICAgLnRoZW4odXNlciA9PiB7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBOb3RGb3VuZEVycm9yKGB1c2VyIHdpdGggaWQgJHtpZH0gbm90IGZvdW5kYClcbiAgICAgICAgICAgIHJldHVybiBTcG90LmZpbmQoeyBwdWJsaXNoZXJJZDogaWQsIGNyZWF0ZWQ6IHsgJGx0ZTogbmV3IERhdGUgfSB9KS5wb3B1bGF0ZShcInB1Ymxpc2hlcklkXCIsIFwibmFtZSBzdXJuYW1lIGVtYWlsIHBob25lXCIpLnNvcnQoeyBjcmVhdGVkOiAtMSB9KVxuICAgICAgICAgICAgICAgIC5sZWFuKClcbiAgICAgICAgICAgICAgICAudGhlbihzcG90cyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3BvdHMpIHRocm93IG5ldyBOb3RGb3VuZEVycm9yKGBubyBzcG90cyB3ZXJlIGZvdW5kIG1hdGNoaW5nIHlvdXIgcmVxdWVzdGApXG4gICAgICAgICAgICAgICAgICAgIHNwb3RzLmZvckVhY2goc3BvdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcG90LmlkID0gc3BvdC5faWQudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3BvdC5wdWJsaXNoZXJJZC5pZCA9IHNwb3QucHVibGlzaGVySWQuX2lkLnRvU3RyaW5nKClcblxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNwb3QuX2lkXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3BvdC5fX3ZcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3BvdHNcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9KSBcbn0iXX0=