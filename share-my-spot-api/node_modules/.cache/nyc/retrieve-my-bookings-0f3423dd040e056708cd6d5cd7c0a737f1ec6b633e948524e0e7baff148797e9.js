function cov_n23a7bmfp(){var path="/Users/federicolacabaratz/bootcamp/collab/skylab-bootcamp-202001/staff/federico-lacabaratz/share-my-spot/share-my-spot-api/logic/retrieve-my-bookings.js";var hash="481e03216303ffcf3d8101ac7e70142a05768561";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/federicolacabaratz/bootcamp/collab/skylab-bootcamp-202001/staff/federico-lacabaratz/share-my-spot/share-my-spot-api/logic/retrieve-my-bookings.js",statementMap:{"0":{start:{line:1,column:35},end:{line:1,column:64}},"1":{start:{line:2,column:21},end:{line:2,column:51}},"2":{start:{line:3,column:26},end:{line:3,column:57}},"3":{start:{line:15,column:0},end:{line:37,column:1}},"4":{start:{line:16,column:4},end:{line:16,column:29}},"5":{start:{line:18,column:4},end:{line:36,column:8}},"6":{start:{line:19,column:21},end:{line:19,column:44}},"7":{start:{line:21,column:8},end:{line:21,column:74}},"8":{start:{line:21,column:19},end:{line:21,column:74}},"9":{start:{line:23,column:22},end:{line:24,column:15}},"10":{start:{line:26,column:8},end:{line:32,column:10}},"11":{start:{line:27,column:12},end:{line:27,column:41}},"12":{start:{line:29,column:12},end:{line:29,column:27}},"13":{start:{line:30,column:12},end:{line:30,column:27}},"14":{start:{line:34,column:8},end:{line:34,column:20}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:15,column:17},end:{line:15,column:18}},loc:{start:{line:15,column:23},end:{line:37,column:1}},line:15},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:12},end:{line:18,column:13}},loc:{start:{line:18,column:24},end:{line:36,column:5}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:26,column:22},end:{line:26,column:23}},loc:{start:{line:26,column:30},end:{line:32,column:9}},line:26}},branchMap:{"0":{loc:{start:{line:21,column:8},end:{line:21,column:74}},type:"if",locations:[{start:{line:21,column:8},end:{line:21,column:74}},{start:{line:21,column:8},end:{line:21,column:74}}],line:21}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"481e03216303ffcf3d8101ac7e70142a05768561"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_n23a7bmfp=function(){return actualCoverage;};return actualCoverage;}cov_n23a7bmfp();const{models:{User,Spot}}=(cov_n23a7bmfp().s[0]++,require('share-my-spot-data'));const{validate}=(cov_n23a7bmfp().s[1]++,require('share-my-spot-utils'));const{NotFoundError}=(cov_n23a7bmfp().s[2]++,require('share-my-spot-errors'));/**
 * Retrieves my bookings made to another spots as a candidate
 * 
 * @param {string} id user's unique id number (candidate)
 * 
 * @returns {Promise<string>} returns the spots that have applied to as candidate or the ones that I have been accepted from
 * 
 * @throws {NotFoundError} on not found user id
 */cov_n23a7bmfp().s[3]++;module.exports=id=>{cov_n23a7bmfp().f[0]++;cov_n23a7bmfp().s[4]++;validate.string(id,'id');cov_n23a7bmfp().s[5]++;return(async()=>{cov_n23a7bmfp().f[1]++;const user=(cov_n23a7bmfp().s[6]++,await User.findById(id));cov_n23a7bmfp().s[7]++;if(!user){cov_n23a7bmfp().b[0][0]++;cov_n23a7bmfp().s[8]++;throw new NotFoundError(`user with id ${id} not found`);}else{cov_n23a7bmfp().b[0][1]++;}const spots=(cov_n23a7bmfp().s[9]++,await Spot.find({$or:[{'bookingCandidates':id},{'bookedTo':id}]}).populate("publisherId","name surname email phone").lean());cov_n23a7bmfp().s[10]++;spots.forEach(spot=>{cov_n23a7bmfp().f[2]++;cov_n23a7bmfp().s[11]++;spot.id=spot._id.toString();cov_n23a7bmfp().s[12]++;delete spot._id;cov_n23a7bmfp().s[13]++;delete spot.__v;});cov_n23a7bmfp().s[14]++;return spots;})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLW15LWJvb2tpbmdzLmpzIl0sIm5hbWVzIjpbIm1vZGVscyIsIlVzZXIiLCJTcG90IiwicmVxdWlyZSIsInZhbGlkYXRlIiwiTm90Rm91bmRFcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiLCJpZCIsInN0cmluZyIsInVzZXIiLCJmaW5kQnlJZCIsInNwb3RzIiwiZmluZCIsIiRvciIsInBvcHVsYXRlIiwibGVhbiIsImZvckVhY2giLCJzcG90IiwiX2lkIiwidG9TdHJpbmciLCJfX3YiXSwibWFwcGluZ3MiOiJvNkVBQUEsS0FBTSxDQUFFQSxNQUFNLENBQUUsQ0FBRUMsSUFBRixDQUFRQyxJQUFSLENBQVYsMEJBQTZCQyxPQUFPLENBQUMsb0JBQUQsQ0FBcEMsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsUUFBRiwwQkFBZUQsT0FBTyxDQUFDLHFCQUFELENBQXRCLENBQU4sQ0FDQSxLQUFNLENBQUVFLGFBQUYsMEJBQW9CRixPQUFPLENBQUMsc0JBQUQsQ0FBM0IsQ0FBTixDQUVBOzs7Ozs7OzswQkFVQUcsTUFBTSxDQUFDQyxPQUFQLENBQWlCQyxFQUFFLEVBQUksK0NBQ25CSixRQUFRLENBQUNLLE1BQVQsQ0FBZ0JELEVBQWhCLENBQW9CLElBQXBCLEVBRG1CLHVCQUduQixNQUFPLENBQUMsU0FBWSx3QkFDaEIsS0FBTUUsQ0FBQUEsSUFBSSx5QkFBRyxLQUFNVCxDQUFBQSxJQUFJLENBQUNVLFFBQUwsQ0FBY0gsRUFBZCxDQUFULENBQVYsQ0FEZ0IsdUJBR2hCLEdBQUksQ0FBQ0UsSUFBTCxDQUFXLHVEQUFNLElBQUlMLENBQUFBLGFBQUosQ0FBbUIsZ0JBQWVHLEVBQUcsWUFBckMsQ0FBTixDQUF1RCxDQUFsRSxnQ0FFQSxLQUFNSSxDQUFBQSxLQUFLLHlCQUFHLEtBQU1WLENBQUFBLElBQUksQ0FBQ1csSUFBTCxDQUFVLENBQUNDLEdBQUcsQ0FBQyxDQUFFLENBQUMsb0JBQXFCTixFQUF0QixDQUFGLENBQTZCLENBQUMsV0FBWUEsRUFBYixDQUE3QixDQUFMLENBQVYsRUFBaUVPLFFBQWpFLENBQTBFLGFBQTFFLENBQXlGLDBCQUF6RixFQUNuQkMsSUFEbUIsRUFBVCxDQUFYLENBTGdCLHdCQVFoQkosS0FBSyxDQUFDSyxPQUFOLENBQWNDLElBQUksRUFBSSxnREFDbEJBLElBQUksQ0FBQ1YsRUFBTCxDQUFVVSxJQUFJLENBQUNDLEdBQUwsQ0FBU0MsUUFBVCxFQUFWLENBRGtCLHdCQUdsQixNQUFPRixDQUFBQSxJQUFJLENBQUNDLEdBQVosQ0FIa0Isd0JBSWxCLE1BQU9ELENBQUFBLElBQUksQ0FBQ0csR0FBWixDQUVILENBTkQsRUFSZ0Isd0JBZ0JoQixNQUFPVCxDQUFBQSxLQUFQLENBRUgsQ0FsQk0sR0FBUCxDQW1CSCxDQXRCRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgbW9kZWxzOiB7IFVzZXIsIFNwb3QgfSB9ID0gcmVxdWlyZSgnc2hhcmUtbXktc3BvdC1kYXRhJylcbmNvbnN0IHsgdmFsaWRhdGUgfSA9IHJlcXVpcmUoJ3NoYXJlLW15LXNwb3QtdXRpbHMnKVxuY29uc3QgeyBOb3RGb3VuZEVycm9yIH0gPSByZXF1aXJlKCdzaGFyZS1teS1zcG90LWVycm9ycycpXG5cbi8qKlxuICogUmV0cmlldmVzIG15IGJvb2tpbmdzIG1hZGUgdG8gYW5vdGhlciBzcG90cyBhcyBhIGNhbmRpZGF0ZVxuICogXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgdXNlcidzIHVuaXF1ZSBpZCBudW1iZXIgKGNhbmRpZGF0ZSlcbiAqIFxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gcmV0dXJucyB0aGUgc3BvdHMgdGhhdCBoYXZlIGFwcGxpZWQgdG8gYXMgY2FuZGlkYXRlIG9yIHRoZSBvbmVzIHRoYXQgSSBoYXZlIGJlZW4gYWNjZXB0ZWQgZnJvbVxuICogXG4gKiBAdGhyb3dzIHtOb3RGb3VuZEVycm9yfSBvbiBub3QgZm91bmQgdXNlciBpZFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gaWQgPT4ge1xuICAgIHZhbGlkYXRlLnN0cmluZyhpZCwgJ2lkJylcblxuICAgIHJldHVybiAoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChpZClcblxuICAgICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBOb3RGb3VuZEVycm9yKGB1c2VyIHdpdGggaWQgJHtpZH0gbm90IGZvdW5kYClcblxuICAgICAgICBjb25zdCBzcG90cyA9IGF3YWl0IFNwb3QuZmluZCh7JG9yOlsgeydib29raW5nQ2FuZGlkYXRlcyc6IGlkfSwgeydib29rZWRUbyc6IGlkfSBdfSkucG9wdWxhdGUoXCJwdWJsaXNoZXJJZFwiLCBcIm5hbWUgc3VybmFtZSBlbWFpbCBwaG9uZVwiKVxuICAgICAgICAubGVhbigpXG5cbiAgICAgICAgc3BvdHMuZm9yRWFjaChzcG90ID0+IHtcbiAgICAgICAgICAgIHNwb3QuaWQgPSBzcG90Ll9pZC50b1N0cmluZygpXG5cbiAgICAgICAgICAgIGRlbGV0ZSBzcG90Ll9pZFxuICAgICAgICAgICAgZGVsZXRlIHNwb3QuX192XG5cbiAgICAgICAgfSlcblxuICAgICAgICByZXR1cm4gc3BvdHNcblxuICAgIH0pKClcbn0iXX0=